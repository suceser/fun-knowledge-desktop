# è¶£çŸ¥æ¡Œé¢ç‰ˆ - éƒ¨ç½²åˆ†å‘

<div align="center">
  <h1>ğŸ“¦ è¶£çŸ¥æ¡Œé¢ç‰ˆéƒ¨ç½²åˆ†å‘</h1>
  <p>åº”ç”¨æ‰“åŒ…ã€åˆ†å‘ä¸è‡ªåŠ¨æ›´æ–°ç­–ç•¥</p>
</div>

---

## ğŸ“– ç›®å½•

1. [æ„å»ºé…ç½®](#1-æ„å»ºé…ç½®)
2. [æ‰“åŒ…ç­–ç•¥](#2-æ‰“åŒ…ç­–ç•¥)
3. [è‡ªåŠ¨æ›´æ–°](#3-è‡ªåŠ¨æ›´æ–°)
4. [CI/CDæµæ°´çº¿](#4-cicdæµæ°´çº¿)
5. [å‘å¸ƒæµç¨‹](#5-å‘å¸ƒæµç¨‹)
6. [ç‰ˆæœ¬ç®¡ç†](#6-ç‰ˆæœ¬ç®¡ç†)

---

## 1. æ„å»ºé…ç½®

### 1.1 Electron Builderé…ç½®

#### package.jsonæ„å»ºé…ç½®

```json
{
  "name": "fun-knowledge-desktop",
  "productName": "è¶£çŸ¥æ¡Œé¢ç‰ˆ",
  "version": "1.0.0",
  "description": "ç°ä»£åŒ–æ¡Œé¢çŸ¥è¯†ç®¡ç†åº”ç”¨",
  "author": "FunKnowledge Team",
  "build": {
    "appId": "com.funknowledge.desktop",
    "productName": "è¶£çŸ¥æ¡Œé¢ç‰ˆ",
    "asar": true,
    "asarUnpack": [
      "**/*.node",
      "**/node_modules/sharp/**/*"
    ],
    "files": [
      "dist/**/*",
      "node_modules/**/*",
      "package.json"
    ],
    "directories": {
      "buildResources": "assets",
      "output": "release/build"
    },
    "extraResources": [
      {
        "from": "assets/",
        "to": "assets/",
        "filter": ["**/*"]
      }
    ],
    "mac": {
      "target": [
        {
          "target": "dmg",
          "arch": ["arm64", "x64"]
        },
        {
          "target": "zip",
          "arch": ["arm64", "x64"]
        }
      ],
      "category": "public.app-category.productivity",
      "icon": "assets/icon.icns",
      "hardenedRuntime": true,
      "gatekeeperAssess": false,
      "entitlements": "build/entitlements.mac.plist",
      "entitlementsInherit": "build/entitlements.mac.plist",
      "notarize": {
        "teamId": "YOUR_TEAM_ID"
      }
    },
    "dmg": {
      "contents": [
        {
          "x": 130,
          "y": 220
        },
        {
          "x": 410,
          "y": 220,
          "type": "link",
          "path": "/Applications"
        }
      ],
      "window": {
        "width": 540,
        "height": 380
      }
    },
    "win": {
      "target": [
        {
          "target": "nsis",
          "arch": ["x64", "ia32"]
        },
        {
          "target": "portable",
          "arch": ["x64"]
        },
        {
          "target": "zip",
          "arch": ["x64"]
        }
      ],
      "icon": "assets/icon.ico",
      "publisherName": "FunKnowledge Inc.",
      "verifyUpdateCodeSignature": false
    },
    "nsis": {
      "oneClick": false,
      "perMachine": false,
      "allowElevation": true,
      "allowToChangeInstallationDirectory": true,
      "createDesktopShortcut": true,
      "createStartMenuShortcut": true,
      "shortcutName": "è¶£çŸ¥æ¡Œé¢ç‰ˆ",
      "include": "build/installer.nsh",
      "installerIcon": "assets/icon.ico",
      "uninstallerIcon": "assets/icon.ico",
      "installerHeaderIcon": "assets/icon.ico",
      "deleteAppDataOnUninstall": false
    },
    "portable": {
      "artifactName": "${productName}-${version}-portable.${ext}"
    },
    "linux": {
      "target": [
        {
          "target": "AppImage",
          "arch": ["x64"]
        },
        {
          "target": "deb",
          "arch": ["x64"]
        },
        {
          "target": "rpm",
          "arch": ["x64"]
        }
      ],
      "icon": "assets/icons/",
      "category": "Office",
      "maintainer": "contact@funknowledge.com",
      "vendor": "FunKnowledge Inc.",
      "synopsis": "ç°ä»£åŒ–æ¡Œé¢çŸ¥è¯†ç®¡ç†åº”ç”¨",
      "description": "é€šè¿‡AIæŠ€æœ¯å’Œå¯è§†åŒ–è®¾è®¡ï¼Œæä¾›æ™ºèƒ½é—®ç­”ã€çŸ¥è¯†å›¾è°±ã€æ–‡æ¡£ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½"
    },
    "appImage": {
      "license": "LICENSE"
    },
    "deb": {
      "depends": [
        "gconf2",
        "gconf-service",
        "libnotify4",
        "libappindicator1",
        "libxtst6",
        "libnss3"
      ]
    },
    "publish": [
      {
        "provider": "github",
        "owner": "funknowledge",
        "repo": "fun-knowledge-desktop"
      }
    ]
  }
}
```

#### macOSæƒé™é…ç½®

```xml
<!-- build/entitlements.mac.plist -->
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
  <dict>
    <key>com.apple.security.cs.allow-unsigned-executable-memory</key>
    <true/>
    <key>com.apple.security.cs.allow-jit</key>
    <true/>
    <key>com.apple.security.network.client</key>
    <true/>
    <key>com.apple.security.network.server</key>
    <true/>
    <key>com.apple.security.files.user-selected.read-write</key>
    <true/>
  </dict>
</plist>
```

### 1.2 æ„å»ºè„šæœ¬

#### npm scriptsé…ç½®

```json
{
  "scripts": {
    "dev": "concurrently \"npm run start:renderer\" \"npm run start:main\"",
    "start:renderer": "webpack serve --config webpack.renderer.dev.js",
    "start:main": "electron -r ts-node/register src/main.ts",
    
    "build": "npm run build:renderer && npm run build:main",
    "build:renderer": "webpack --config webpack.renderer.prod.js",
    "build:main": "webpack --config webpack.main.prod.js",
    
    "package": "npm run build && electron-builder build --publish never",
    "package:mac": "npm run build && electron-builder build --mac --publish never",
    "package:win": "npm run build && electron-builder build --win --publish never",
    "package:linux": "npm run build && electron-builder build --linux --publish never",
    
    "release": "npm run build && electron-builder build --publish always",
    "release:mac": "npm run build && electron-builder build --mac --publish always",
    "release:win": "npm run build && electron-builder build --win --publish always",
    "release:linux": "npm run build && electron-builder build --linux --publish always"
  }
}
```

#### æ„å»ºå‰ç½®æ£€æŸ¥è„šæœ¬

```javascript
// scripts/pre-build.js
const fs = require('fs');
const path = require('path');

function checkBuildRequirements() {
  console.log('æ£€æŸ¥æ„å»ºç¯å¢ƒ...');

  // æ£€æŸ¥Nodeç‰ˆæœ¬
  const nodeVersion = process.version;
  const requiredVersion = 'v18.0.0';
  if (nodeVersion < requiredVersion) {
    console.error(`âŒ Nodeç‰ˆæœ¬è¿‡ä½ï¼Œéœ€è¦ ${requiredVersion} æˆ–æ›´é«˜`);
    process.exit(1);
  }
  console.log(`âœ… Nodeç‰ˆæœ¬: ${nodeVersion}`);

  // æ£€æŸ¥å¿…éœ€æ–‡ä»¶
  const requiredFiles = [
    'package.json',
    'webpack.main.prod.js',
    'webpack.renderer.prod.js',
    'assets/icon.icns',
    'assets/icon.ico'
  ];

  for (const file of requiredFiles) {
    if (!fs.existsSync(path.join(__dirname, '..', file))) {
      console.error(`âŒ ç¼ºå°‘å¿…éœ€æ–‡ä»¶: ${file}`);
      process.exit(1);
    }
  }
  console.log('âœ… å¿…éœ€æ–‡ä»¶æ£€æŸ¥é€šè¿‡');

  // æ£€æŸ¥ç¯å¢ƒå˜é‡
  if (process.env.NODE_ENV !== 'production') {
    console.warn('âš ï¸  NODE_ENV æœªè®¾ç½®ä¸º production');
  }

  console.log('âœ… æ„å»ºç¯å¢ƒæ£€æŸ¥é€šè¿‡\n');
}

checkBuildRequirements();
```

---

## 2. æ‰“åŒ…ç­–ç•¥

### 2.1 å¹³å°ç‰¹å®šé…ç½®

#### macOSæ‰“åŒ…

```bash
# æ„å»ºmacOSåº”ç”¨
npm run package:mac

# è¾“å‡ºæ–‡ä»¶
# - FunKnowledge-1.0.0-arm64.dmg (Apple Silicon)
# - FunKnowledge-1.0.0-x64.dmg (Intel)
# - FunKnowledge-1.0.0-arm64-mac.zip
# - FunKnowledge-1.0.0-mac.zip
```

**macOSç‰¹æ®Šå¤„ç†:**

1. **ä»£ç ç­¾å**
   ```bash
   # å¼€å‘è€…è¯ä¹¦é…ç½®
   export CSC_LINK=/path/to/certificate.p12
   export CSC_KEY_PASSWORD=your_password
   ```

2. **å…¬è¯åŒ–**
   ```bash
   # Appleå…¬è¯é…ç½®
   export APPLE_ID=your@email.com
   export APPLE_ID_PASSWORD=@keychain:AC_PASSWORD
   export APPLE_TEAM_ID=TEAM_ID
   ```

3. **é€šç”¨äºŒè¿›åˆ¶**
   ```javascript
   // åŒæ—¶æ”¯æŒIntelå’ŒApple Silicon
   {
     "mac": {
       "target": {
         "target": "dmg",
         "arch": ["arm64", "x64", "universal"]
       }
     }
   }
   ```

#### Windowsæ‰“åŒ…

```bash
# æ„å»ºWindowsåº”ç”¨
npm run package:win

# è¾“å‡ºæ–‡ä»¶
# - FunKnowledge Setup 1.0.0.exe (NSISå®‰è£…åŒ…)
# - FunKnowledge 1.0.0.exe (ä¾¿æºç‰ˆ)
# - FunKnowledge-1.0.0-win.zip
```

**Windowsç‰¹æ®Šå¤„ç†:**

1. **ä»£ç ç­¾å**
   ```bash
   # Windowsè¯ä¹¦é…ç½®
   export CSC_LINK=/path/to/certificate.pfx
   export CSC_KEY_PASSWORD=your_password
   ```

2. **å®‰è£…ç¨‹åºè‡ªå®šä¹‰**
   ```nsis
   ; build/installer.nsh
   !macro customInstall
     ; è‡ªå®šä¹‰å®‰è£…é€»è¾‘
     WriteRegStr HKCU "Software\FunKnowledge" "InstallPath" $INSTDIR
   !macroend

   !macro customUnInstall
     ; è‡ªå®šä¹‰å¸è½½é€»è¾‘
     DeleteRegKey HKCU "Software\FunKnowledge"
   !macroend
   ```

#### Linuxæ‰“åŒ…

```bash
# æ„å»ºLinuxåº”ç”¨
npm run package:linux

# è¾“å‡ºæ–‡ä»¶
# - FunKnowledge-1.0.0.AppImage
# - fun-knowledge-desktop_1.0.0_amd64.deb
# - fun-knowledge-desktop-1.0.0.x86_64.rpm
```

**Linuxç‰¹æ®Šå¤„ç†:**

1. **ä¾èµ–ç®¡ç†**
   ```json
   {
     "deb": {
       "depends": [
         "gconf2",
         "gconf-service",
         "libnotify4"
       ]
     }
   }
   ```

2. **æ¡Œé¢é›†æˆ**
   ```desktop
   [Desktop Entry]
   Name=è¶£çŸ¥æ¡Œé¢ç‰ˆ
   Comment=ç°ä»£åŒ–æ¡Œé¢çŸ¥è¯†ç®¡ç†åº”ç”¨
   Exec=AppRun
   Icon=fun-knowledge-desktop
   Type=Application
   Categories=Office;Utility;
   ```

### 2.2 èµ„æºä¼˜åŒ–

#### ä»£ç å‹ç¼©

```javascript
// webpack.main.prod.js
const TerserPlugin = require('terser-webpack-plugin');

module.exports = {
  mode: 'production',
  optimization: {
    minimize: true,
    minimizer: [
      new TerserPlugin({
        parallel: true,
        terserOptions: {
          compress: {
            drop_console: true,
            drop_debugger: true
          }
        }
      })
    ]
  }
};
```

#### ASARæ‰“åŒ…

```javascript
// æ’é™¤ä¸éœ€è¦æ‰“åŒ…çš„æ–‡ä»¶
{
  "build": {
    "asar": true,
    "asarUnpack": [
      "**/*.node",
      "**/node_modules/sharp/**/*"
    ]
  }
}
```

#### ä¾èµ–ä¼˜åŒ–

```bash
# åªæ‰“åŒ…ç”Ÿäº§ä¾èµ–
npm prune --production

# ä½¿ç”¨webpack externals
externals: {
  electron: 'commonjs2 electron'
}
```

---

## 3. è‡ªåŠ¨æ›´æ–°

### 3.1 æ›´æ–°æœºåˆ¶

#### electron-updateré…ç½®

```typescript
// src/main/services/UpdateService.ts
import { autoUpdater } from 'electron-updater';
import { app, dialog, BrowserWindow } from 'electron';
import log from 'electron-log';

export class UpdateService {
  private mainWindow: BrowserWindow | null;

  constructor(mainWindow: BrowserWindow) {
    this.mainWindow = mainWindow;
    this.setupAutoUpdater();
  }

  private setupAutoUpdater() {
    // é…ç½®æ›´æ–°æœåŠ¡å™¨
    autoUpdater.setFeedURL({
      provider: 'github',
      owner: 'funknowledge',
      repo: 'fun-knowledge-desktop'
    });

    // é…ç½®æ—¥å¿—
    autoUpdater.logger = log;
    autoUpdater.autoDownload = false;
    autoUpdater.autoInstallOnAppQuit = true;

    // ç›‘å¬æ›´æ–°äº‹ä»¶
    this.registerUpdateHandlers();
  }

  private registerUpdateHandlers() {
    // æ£€æŸ¥æ›´æ–°ä¸­
    autoUpdater.on('checking-for-update', () => {
      log.info('æ£€æŸ¥æ›´æ–°ä¸­...');
      this.sendStatusToWindow('checking-for-update');
    });

    // å‘ç°æ–°ç‰ˆæœ¬
    autoUpdater.on('update-available', (info) => {
      log.info('å‘ç°æ–°ç‰ˆæœ¬:', info.version);
      this.showUpdateDialog(info);
    });

    // å½“å‰å·²æ˜¯æœ€æ–°ç‰ˆæœ¬
    autoUpdater.on('update-not-available', (info) => {
      log.info('å½“å‰å·²æ˜¯æœ€æ–°ç‰ˆæœ¬');
      this.sendStatusToWindow('update-not-available');
    });

    // ä¸‹è½½è¿›åº¦
    autoUpdater.on('download-progress', (progressObj) => {
      let logMessage = `ä¸‹è½½é€Ÿåº¦: ${progressObj.bytesPerSecond}`;
      logMessage += ` - å·²ä¸‹è½½ ${progressObj.percent}%`;
      logMessage += ` (${progressObj.transferred}/${progressObj.total})`;
      log.info(logMessage);
      
      this.sendStatusToWindow('download-progress', progressObj);
    });

    // ä¸‹è½½å®Œæˆ
    autoUpdater.on('update-downloaded', (info) => {
      log.info('æ›´æ–°ä¸‹è½½å®Œæˆ');
      this.showRestartDialog(info);
    });

    // æ›´æ–°é”™è¯¯
    autoUpdater.on('error', (error) => {
      log.error('æ›´æ–°é”™è¯¯:', error);
      this.sendStatusToWindow('update-error', error);
    });
  }

  private showUpdateDialog(updateInfo: any) {
    if (!this.mainWindow) return;

    dialog.showMessageBox(this.mainWindow, {
      type: 'info',
      title: 'å‘ç°æ–°ç‰ˆæœ¬',
      message: `å‘ç°æ–°ç‰ˆæœ¬ ${updateInfo.version}`,
      detail: updateInfo.releaseNotes,
      buttons: ['ç«‹å³æ›´æ–°', 'ç¨åæé†’'],
      defaultId: 0,
      cancelId: 1
    }).then(result => {
      if (result.response === 0) {
        autoUpdater.downloadUpdate();
        this.showDownloadingDialog();
      }
    });
  }

  private showDownloadingDialog() {
    if (!this.mainWindow) return;

    dialog.showMessageBox(this.mainWindow, {
      type: 'info',
      title: 'ä¸‹è½½æ›´æ–°',
      message: 'æ­£åœ¨ä¸‹è½½æ›´æ–°ï¼Œè¯·ç¨å€™...',
      buttons: []
    });
  }

  private showRestartDialog(updateInfo: any) {
    if (!this.mainWindow) return;

    dialog.showMessageBox(this.mainWindow, {
      type: 'info',
      title: 'æ›´æ–°å·²ä¸‹è½½',
      message: 'æ›´æ–°å·²ä¸‹è½½å®Œæˆï¼Œæ˜¯å¦ç«‹å³é‡å¯åº”ç”¨ï¼Ÿ',
      buttons: ['ç«‹å³é‡å¯', 'ç¨åé‡å¯'],
      defaultId: 0,
      cancelId: 1
    }).then(result => {
      if (result.response === 0) {
        autoUpdater.quitAndInstall(false, true);
      }
    });
  }

  private sendStatusToWindow(event: string, data?: any) {
    if (this.mainWindow) {
      this.mainWindow.webContents.send('update-status', { event, data });
    }
  }

  public checkForUpdates() {
    if (app.isPackaged) {
      autoUpdater.checkForUpdates();
    } else {
      log.info('å¼€å‘ç¯å¢ƒï¼Œè·³è¿‡æ›´æ–°æ£€æŸ¥');
    }
  }

  public checkForUpdatesAndNotify() {
    if (app.isPackaged) {
      autoUpdater.checkForUpdatesAndNotify();
    }
  }
}
```

### 3.2 æ›´æ–°ç­–ç•¥

#### å¯åŠ¨æ£€æŸ¥

```typescript
// src/main/main.ts
app.whenReady().then(() => {
  const mainWindow = createWindow();
  const updateService = new UpdateService(mainWindow);
  
  // åº”ç”¨å¯åŠ¨æ—¶æ£€æŸ¥æ›´æ–°
  setTimeout(() => {
    updateService.checkForUpdates();
  }, 3000); // å»¶è¿Ÿ3ç§’ï¼Œé¿å…å½±å“å¯åŠ¨é€Ÿåº¦
});
```

#### å®šæœŸæ£€æŸ¥

```typescript
// æ¯4å°æ—¶æ£€æŸ¥ä¸€æ¬¡æ›´æ–°
setInterval(() => {
  updateService.checkForUpdates();
}, 4 * 60 * 60 * 1000);
```

#### æ‰‹åŠ¨æ£€æŸ¥

```typescript
// ç”¨æˆ·æ‰‹åŠ¨è§¦å‘æ›´æ–°æ£€æŸ¥
ipcMain.handle('check-for-updates', async () => {
  updateService.checkForUpdates();
});
```

### 3.3 ç‰ˆæœ¬å‘å¸ƒ

#### å‘å¸ƒåˆ°GitHub Releases

```yaml
# .github/workflows/release.yml
name: Release

on:
  push:
    tags:
      - 'v*'

jobs:
  release:
    runs-on: ${{ matrix.os }}
    
    strategy:
      matrix:
        os: [macos-latest, windows-latest, ubuntu-latest]
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Build and release
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: npm run release
```

---

## 4. CI/CDæµæ°´çº¿

### 4.1 GitHub Actionsé…ç½®

#### æŒç»­é›†æˆ

```yaml
# .github/workflows/ci.yml
name: CI

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  lint-and-test:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run linting
        run: npm run lint
      
      - name: Run type check
        run: npm run type-check
      
      - name: Run tests
        run: npm run test:coverage
      
      - name: Upload coverage
        uses: codecov/codecov-action@v3
        with:
          files: ./coverage/lcov.info

  build:
    needs: lint-and-test
    runs-on: ${{ matrix.os }}
    
    strategy:
      matrix:
        os: [macos-latest, windows-latest, ubuntu-latest]
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Build application
        run: npm run build
      
      - name: Package application
        run: npm run package
      
      - name: Upload artifacts
        uses: actions/upload-artifact@v3
        with:
          name: ${{ matrix.os }}-build
          path: release/build/*
```

#### æŒç»­éƒ¨ç½²

```yaml
# .github/workflows/deploy.yml
name: Deploy

on:
  release:
    types: [published]

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Download artifacts
        uses: actions/download-artifact@v3
      
      - name: Deploy to CDN
        run: |
          # ä¸Šä¼ åˆ°CDN
          aws s3 sync release/build/ s3://your-bucket/releases/${{ github.ref_name }}/
      
      - name: Update release notes
        run: |
          # æ›´æ–°å‘å¸ƒè¯´æ˜
          gh release edit ${{ github.ref_name }} --notes-file CHANGELOG.md
```

### 4.2 æœ¬åœ°æ„å»ºæµç¨‹

#### æ„å»ºè„šæœ¬

```bash
#!/bin/bash
# scripts/build.sh

set -e

echo "ğŸš€ å¼€å§‹æ„å»ºåº”ç”¨..."

# æ¸…ç†æ—§æ„å»º
echo "ğŸ“¦ æ¸…ç†æ—§æ„å»º..."
rm -rf dist release

# å®‰è£…ä¾èµ–
echo "ğŸ“¥ å®‰è£…ä¾èµ–..."
npm ci

# è¿è¡Œæµ‹è¯•
echo "ğŸ§ª è¿è¡Œæµ‹è¯•..."
npm run test

# ç±»å‹æ£€æŸ¥
echo "ğŸ” ç±»å‹æ£€æŸ¥..."
npm run type-check

# ä»£ç æ£€æŸ¥
echo "âœ¨ ä»£ç æ£€æŸ¥..."
npm run lint

# æ„å»ºåº”ç”¨
echo "ğŸ—ï¸  æ„å»ºåº”ç”¨..."
npm run build

# æ‰“åŒ…åº”ç”¨
echo "ğŸ“¦ æ‰“åŒ…åº”ç”¨..."
npm run package

echo "âœ… æ„å»ºå®Œæˆ!"
echo "ğŸ“ è¾“å‡ºç›®å½•: release/build/"
```

---

## 5. å‘å¸ƒæµç¨‹

### 5.1 ç‰ˆæœ¬å‘å¸ƒæ£€æŸ¥æ¸…å•

#### å‘å¸ƒå‰æ£€æŸ¥

- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] ä»£ç å®¡æŸ¥å®Œæˆ
- [ ] æ›´æ–°CHANGELOG.md
- [ ] æ›´æ–°ç‰ˆæœ¬å·
- [ ] æ„å»ºæˆåŠŸ
- [ ] åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•é€šè¿‡
- [ ] å®‰å…¨æ‰«æé€šè¿‡
- [ ] æ–‡æ¡£æ›´æ–°å®Œæˆ

#### å‘å¸ƒæ­¥éª¤

```bash
# 1. åˆ›å»ºå‘å¸ƒåˆ†æ”¯
git checkout -b release/v1.0.0

# 2. æ›´æ–°ç‰ˆæœ¬å·
npm version 1.0.0

# 3. æ›´æ–°CHANGELOG
# ç¼–è¾‘ CHANGELOG.md

# 4. æäº¤å˜æ›´
git add .
git commit -m "chore: release v1.0.0"

# 5. åˆå¹¶åˆ°main
git checkout main
git merge release/v1.0.0

# 6. åˆ›å»ºæ ‡ç­¾
git tag -a v1.0.0 -m "Release v1.0.0"

# 7. æ¨é€åˆ°è¿œç¨‹
git push origin main
git push origin v1.0.0

# 8. GitHub Actionsè‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ
```

### 5.2 å‘å¸ƒå…¬å‘Š

#### å‘å¸ƒè¯´æ˜æ¨¡æ¿

```markdown
# è¶£çŸ¥æ¡Œé¢ç‰ˆ v1.0.0

## ğŸ‰ æ–°ç‰¹æ€§

- âœ¨ æ”¯æŒå¤šAIæ¨¡å‹æä¾›å•†
- âœ¨ æ–°å¢çŸ¥è¯†å›¾è°±å¯è§†åŒ–
- âœ¨ æ”¹è¿›çš„æœç´¢ä½“éªŒ

## ğŸ› Bugä¿®å¤

- ğŸ› ä¿®å¤äº†èŠå¤©æ¶ˆæ¯æ»šåŠ¨é—®é¢˜
- ğŸ› ä¿®å¤äº†è®¾ç½®ä¿å­˜å¤±è´¥çš„é—®é¢˜
- ğŸ› ä¿®å¤äº†æ–‡æ¡£å¯¼å…¥é”™è¯¯

## ğŸ’ª æ€§èƒ½ä¼˜åŒ–

- âš¡ æå‡äº†åº”ç”¨å¯åŠ¨é€Ÿåº¦30%
- âš¡ ä¼˜åŒ–äº†å¤§æ•°æ®é‡æ¸²æŸ“æ€§èƒ½
- âš¡ å‡å°‘äº†å†…å­˜å ç”¨

## ğŸ“ å…¶ä»–æ”¹è¿›

- ğŸ“ æ›´æ–°äº†ç”¨æˆ·æ–‡æ¡£
- ğŸ“ æ”¹è¿›äº†é”™è¯¯æç¤º
- ğŸ“ ä¼˜åŒ–äº†UIäº¤äº’

## ğŸ”— ä¸‹è½½é“¾æ¥

- [macOS (Apple Silicon)](https://github.com/funknowledge/releases/download/v1.0.0/FunKnowledge-1.0.0-arm64.dmg)
- [macOS (Intel)](https://github.com/funknowledge/releases/download/v1.0.0/FunKnowledge-1.0.0-x64.dmg)
- [Windows (x64)](https://github.com/funknowledge/releases/download/v1.0.0/FunKnowledge-Setup-1.0.0.exe)
- [Linux (AppImage)](https://github.com/funknowledge/releases/download/v1.0.0/FunKnowledge-1.0.0.AppImage)
- [Linux (deb)](https://github.com/funknowledge/releases/download/v1.0.0/fun-knowledge-desktop_1.0.0_amd64.deb)

## ğŸ“Š å®Œæ•´å˜æ›´æ—¥å¿—

è¯¦è§ [CHANGELOG.md](./CHANGELOG.md)
```

---

## 6. ç‰ˆæœ¬ç®¡ç†

### 6.1 è¯­ä¹‰åŒ–ç‰ˆæœ¬

#### ç‰ˆæœ¬å·æ ¼å¼

```
ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å· (MAJOR.MINOR.PATCH)

ä¾‹å¦‚: 1.2.3
- 1: ä¸»ç‰ˆæœ¬å· (ä¸å…¼å®¹çš„APIå˜æ›´)
- 2: æ¬¡ç‰ˆæœ¬å· (å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ–°å¢)
- 3: ä¿®è®¢å· (å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£)
```

#### ç‰ˆæœ¬ç­–ç•¥

| ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| ä¸»ç‰ˆæœ¬ | é‡å¤§å˜æ›´ï¼Œå¯èƒ½ä¸å…¼å®¹ | 1.0.0 â†’ 2.0.0 |
| æ¬¡ç‰ˆæœ¬ | æ–°åŠŸèƒ½ï¼Œå‘ä¸‹å…¼å®¹ | 1.0.0 â†’ 1.1.0 |
| ä¿®è®¢ç‰ˆ | Bugä¿®å¤ | 1.0.0 â†’ 1.0.1 |
| é¢„å‘å¸ƒ | Alpha/Beta/RC | 1.0.0-beta.1 |

### 6.2 å˜æ›´æ—¥å¿—

#### CHANGELOG.mdæ¨¡æ¿

```markdown
# å˜æ›´æ—¥å¿—

æ‰€æœ‰é‡è¦å˜æ›´éƒ½å°†è®°å½•åœ¨æ­¤æ–‡ä»¶ä¸­ã€‚

æ ¼å¼åŸºäº [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)ï¼Œ
ç‰ˆæœ¬å·éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/lang/zh-CN/)ã€‚

## [Unreleased]

### Added
- å¾…å‘å¸ƒçš„æ–°åŠŸèƒ½

### Changed
- å¾…å‘å¸ƒçš„å˜æ›´

### Fixed
- å¾…å‘å¸ƒçš„ä¿®å¤

## [1.0.0] - 2024-04-30

### Added
- âœ¨ å¤šAIæ¨¡å‹æ”¯æŒ
- âœ¨ çŸ¥è¯†å›¾è°±å¯è§†åŒ–
- âœ¨ å®Œæ•´çš„è®¾ç½®ç³»ç»Ÿ
- âœ¨ æœ¬åœ°æ•°æ®æŒä¹…åŒ–

### Changed
- ğŸ¨ æ”¹è¿›äº†UIè®¾è®¡
- â™»ï¸ é‡æ„äº†AIæœåŠ¡æ¨¡å—

### Fixed
- ğŸ› ä¿®å¤äº†å†…å­˜æ³„æ¼é—®é¢˜
- ğŸ› ä¿®å¤äº†IPCé€šä¿¡é”™è¯¯

## [0.9.0] - 2024-03-31

### Added
- âœ¨ åŸºç¡€AIé—®ç­”åŠŸèƒ½
- âœ¨ ç¬”è®°ç¼–è¾‘å™¨
- âœ¨ åŠ©æ‰‹ç®¡ç†ç³»ç»Ÿ

### Changed
- ğŸ¨ æ›´æ–°äº†ä¸»é¢˜æ ·å¼

### Fixed
- ğŸ› ä¿®å¤äº†å¯åŠ¨å´©æºƒé—®é¢˜
```

### 6.3 å‘å¸ƒæ¸ é“

#### ç¨³å®šç‰ˆï¼ˆStableï¼‰

- é¢å‘æ‰€æœ‰ç”¨æˆ·
- å……åˆ†æµ‹è¯•ï¼Œç¨³å®šå¯é 
- å‘å¸ƒå‘¨æœŸï¼š2-3ä¸ªæœˆ

#### æµ‹è¯•ç‰ˆï¼ˆBetaï¼‰

- é¢å‘æ—©æœŸç”¨æˆ·
- åŒ…å«æ–°åŠŸèƒ½ï¼Œå¯èƒ½ä¸ç¨³å®š
- å‘å¸ƒå‘¨æœŸï¼š2-4å‘¨

#### å¼€å‘ç‰ˆï¼ˆNightlyï¼‰

- é¢å‘å¼€å‘è€…å’Œæµ‹è¯•è€…
- æœ€æ–°ä»£ç ï¼Œå¯èƒ½æœ‰bug
- å‘å¸ƒå‘¨æœŸï¼šæ¯æ—¥æ„å»º

---

## ğŸ“ æ€»ç»“

### ğŸ¯ éƒ¨ç½²åˆ†å‘æ ¸å¿ƒ

1. **å¤šå¹³å°æ”¯æŒ**: macOSã€Windowsã€Linuxå®Œæ•´æ”¯æŒ
2. **è‡ªåŠ¨æ›´æ–°**: æ— ç¼çš„è‡ªåŠ¨æ›´æ–°ä½“éªŒ
3. **CI/CD**: è‡ªåŠ¨åŒ–æ„å»ºå’Œå‘å¸ƒæµç¨‹
4. **ç‰ˆæœ¬ç®¡ç†**: è§„èŒƒçš„ç‰ˆæœ¬å’Œå˜æ›´ç®¡ç†

### ğŸ“ˆ æœ€ä½³å®è·µ

- **ä»£ç ç­¾å**: æ‰€æœ‰å¹³å°éƒ½è¿›è¡Œä»£ç ç­¾å
- **å¢é‡æ›´æ–°**: ä½¿ç”¨å·®åˆ†æ›´æ–°å‡å°‘ä¸‹è½½é‡
- **ç°åº¦å‘å¸ƒ**: é€æ­¥æ¨é€æ–°ç‰ˆæœ¬
- **å›æ»šæœºåˆ¶**: æ”¯æŒå¿«é€Ÿå›æ»šåˆ°ç¨³å®šç‰ˆæœ¬

### ğŸ–ï¸ è´¨é‡ä¿éšœ

- å‘å¸ƒå‰å……åˆ†æµ‹è¯•
- å¤šå¹³å°å…¼å®¹æ€§éªŒè¯
- æ€§èƒ½å’Œå®‰å…¨å®¡è®¡
- ç”¨æˆ·åé¦ˆå¿«é€Ÿå“åº”

é€šè¿‡å®Œå–„çš„éƒ¨ç½²åˆ†å‘ä½“ç³»ï¼Œç¡®ä¿ç”¨æˆ·èƒ½å¤Ÿæ–¹ä¾¿ã€å®‰å…¨åœ°è·å–å’Œæ›´æ–°åº”ç”¨ã€‚

---

*æœ¬æ–‡æ¡£å°†éšç€é¡¹ç›®å‘å±•æŒç»­æ›´æ–°å’Œå®Œå–„ã€‚*
*æœ€åæ›´æ–°: 2025-10-19*

