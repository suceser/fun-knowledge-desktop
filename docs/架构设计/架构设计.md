# è¶£çŸ¥æ¡Œé¢ç‰ˆ - æ¶æ„è®¾è®¡æ–‡æ¡£

<div align="center">
  <h1>ğŸ—ï¸ è¶£çŸ¥æ¡Œé¢ç‰ˆæ¶æ„è®¾è®¡</h1>
  <p>ç°ä»£åŒ–æ¡Œé¢çŸ¥è¯†ç®¡ç†åº”ç”¨çš„æŠ€æœ¯æ¶æ„ä¸å®ç°æ–¹æ¡ˆ</p>
</div>

---

## ğŸ“– ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
2. [æ•´ä½“æ¶æ„è®¾è®¡](#2-æ•´ä½“æ¶æ„è®¾è®¡)
3. [æŠ€æœ¯æ ˆé€‰æ‹©](#3-æŠ€æœ¯æ ˆé€‰æ‹©)
4. [å‰ç«¯æ¶æ„è®¾è®¡](#4-å‰ç«¯æ¶æ„è®¾è®¡)
5. [ä¸»è¿›ç¨‹æ¶æ„è®¾è®¡](#5-ä¸»è¿›ç¨‹æ¶æ„è®¾è®¡)
6. [æ•°æ®æ¶æ„è®¾è®¡](#6-æ•°æ®æ¶æ„è®¾è®¡)
7. [æ ¸å¿ƒæ¨¡å—è®¾è®¡](#7-æ ¸å¿ƒæ¨¡å—è®¾è®¡)
8. [é€šä¿¡æœºåˆ¶è®¾è®¡](#8-é€šä¿¡æœºåˆ¶è®¾è®¡)
9. [æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#9-æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
10. [å®‰å…¨æ¶æ„è®¾è®¡](#10-å®‰å…¨æ¶æ„è®¾è®¡)
11. [éƒ¨ç½²ä¸åˆ†å‘](#11-éƒ¨ç½²ä¸åˆ†å‘)
12. [å¼€å‘å·¥å…·é“¾](#12-å¼€å‘å·¥å…·é“¾)
13. [ç›‘æ§ä¸æ—¥å¿—](#13-ç›‘æ§ä¸æ—¥å¿—)
14. [æ‰©å±•æ€§è®¾è®¡](#14-æ‰©å±•æ€§è®¾è®¡)
15. [æµ‹è¯•ç­–ç•¥](#15-æµ‹è¯•ç­–ç•¥)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 äº§å“å®šä½
è¶£çŸ¥æ¡Œé¢ç‰ˆæ˜¯ä¸€æ¬¾é¢å‘çŸ¥è¯†å·¥ä½œè€…çš„ç°ä»£åŒ–æ¡Œé¢çŸ¥è¯†ç®¡ç†å·¥å…·ï¼Œé€šè¿‡AIæŠ€æœ¯å’Œå¯è§†åŒ–è®¾è®¡ï¼Œæä¾›æ™ºèƒ½é—®ç­”ã€çŸ¥è¯†å›¾è°±ã€æ–‡æ¡£ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

### 1.2 æŠ€æœ¯ç›®æ ‡
- **è·¨å¹³å°æ”¯æŒ**: Windowsã€macOSã€Linux ä¸‰å¤§å¹³å°
- **ç¦»çº¿ä¼˜å…ˆ**: æœ¬åœ°æ•°æ®å­˜å‚¨å’Œå¤„ç†ä¸ºä¸»
- **é«˜æ€§èƒ½**: æ¡Œé¢ç«¯åŸç”Ÿä½“éªŒï¼Œå“åº”è¿…é€Ÿ
- **ç°ä»£åŒ–UI**: æ·±è‰²ä¸»é¢˜+æ¯›ç»ç’ƒæ•ˆæœçš„è§†è§‰ä½“éªŒ
- **å¯æ‰©å±•æ€§**: æ”¯æŒæ’ä»¶ç³»ç»Ÿå’ŒåŠŸèƒ½æ‰©å±•

### 1.3 å½“å‰å®ç°çŠ¶æ€
```
âœ… åŸºç¡€æ¶æ„æ­å»º (Electron + React + TypeScript)
âœ… ç°ä»£åŒ–UIç³»ç»Ÿ (Ant Design + è‡ªå®šä¹‰ä¸»é¢˜)
âœ… é¡µé¢è·¯ç”±å’Œå¯¼èˆªç³»ç»Ÿ
âœ… å“åº”å¼å¸ƒå±€æ¡†æ¶
ğŸ”„ æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½å¼€å‘ä¸­
ğŸ• AIé›†æˆå’Œæ•°æ®å±‚å®ç°å¾…å¼€å‘
```

---

## 2. æ•´ä½“æ¶æ„è®¾è®¡

### 2.1 åˆ†å±‚æ¶æ„
```mermaid
graph TB
    A[ç”¨æˆ·ç•Œé¢å±‚] --> B[ä¸šåŠ¡é€»è¾‘å±‚]
    B --> C[æ•°æ®è®¿é—®å±‚]
    C --> D[æ•°æ®å­˜å‚¨å±‚]
    E[Electronä¸»è¿›ç¨‹] --> F[ç³»ç»ŸAPIå±‚]
    
    A --> A1[Reactç»„ä»¶]
    A --> A2[Ant Design UI]
    A --> A3[CSSæ ·å¼ç³»ç»Ÿ]
    
    B --> B1[é¡µé¢æ§åˆ¶å™¨]
    B --> B2[ä¸šåŠ¡æœåŠ¡]
    B --> B3[çŠ¶æ€ç®¡ç†]
    
    C --> C1[æ•°æ®åº“è®¿é—®]
    C --> C2[æ–‡ä»¶ç³»ç»ŸAPI]
    C --> C3[æœç´¢å¼•æ“]
    
    D --> D1[SQLiteæ•°æ®åº“]
    D --> D2[æœ¬åœ°æ–‡ä»¶å­˜å‚¨]
    D --> D3[å‘é‡æ•°æ®åº“]
    
    E --> E1[çª—å£ç®¡ç†]
    E --> E2[ç³»ç»Ÿé›†æˆ]
    E --> E3[IPCé€šä¿¡]
    
    F --> F1[æ“ä½œç³»ç»ŸAPI]
    F --> F2[æ–‡ä»¶ç³»ç»Ÿ]
    F --> F3[ç¡¬ä»¶è®¿é—®]
```

### 2.2 æ¶æ„ç‰¹ç‚¹
- **å‰ååˆ†ç¦»**: æ¸²æŸ“è¿›ç¨‹ä¸“æ³¨UIï¼Œä¸»è¿›ç¨‹å¤„ç†ç³»ç»Ÿé›†æˆ
- **æ¨¡å—åŒ–è®¾è®¡**: åŠŸèƒ½æ¨¡å—ç‹¬ç«‹ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
- **æ•°æ®é©±åŠ¨**: åŸºäºçŠ¶æ€ç®¡ç†çš„å“åº”å¼æ•°æ®æµ
- **ç¦»çº¿ä¼˜å…ˆ**: æœ¬åœ°æ•°æ®å­˜å‚¨ï¼Œå¯é€‰äº‘ç«¯åŒæ­¥

---

## 3. æŠ€æœ¯æ ˆé€‰æ‹©

### 3.1 æ ¸å¿ƒæŠ€æœ¯æ ˆ

#### å‰ç«¯æŠ€æœ¯
```typescript
{
  "æ¡†æ¶": "React 19.0.0",
  "è¯­è¨€": "TypeScript 5.8.2", 
  "UIåº“": "Ant Design 5.27.1",
  "å¯è§†åŒ–": "@ant-design/charts 2.6.2",
  "è·¯ç”±": "React Router DOM 7.3.0",
  "æ ·å¼": "CSS Modules + CSS Variables"
}
```

#### æ¡Œé¢ç«¯æŠ€æœ¯
```typescript
{
  "æ¡†æ¶": "Electron 35.0.2",
  "æ„å»ºå·¥å…·": "Webpack 5.98.0",
  "åŒ…ç®¡ç†": "npm",
  "ä»£ç è´¨é‡": ["ESLint", "Prettier", "Jest"]
}
```

#### æ•°æ®å­˜å‚¨
```typescript
{
  "å…³ç³»æ•°æ®åº“": "SQLite",
  "å…¨æ–‡æœç´¢": "Lunr.js / ElasticLunr",
  "å‘é‡æ•°æ®åº“": "Faiss / Hnswlib",
  "æ–‡ä»¶å­˜å‚¨": "æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ"
}
```

### 3.2 æŠ€æœ¯é€‰å‹åŸå› 

#### Electroné€‰æ‹©ç†ç”±
- âœ… è·¨å¹³å°ä¸€è‡´æ€§ä½“éªŒ
- âœ… ä¸°å¯Œçš„ç³»ç»ŸAPIè®¿é—®èƒ½åŠ›
- âœ… æˆç†Ÿçš„ç”Ÿæ€ç³»ç»Ÿå’Œç¤¾åŒºæ”¯æŒ
- âœ… ä¾¿äºé›†æˆç°æœ‰WebæŠ€æœ¯æ ˆ

#### Reacté€‰æ‹©ç†ç”±
- âœ… ç»„ä»¶åŒ–å¼€å‘ï¼Œä»£ç å¤ç”¨ç‡é«˜
- âœ… ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿå’Œç¬¬ä¸‰æ–¹åº“
- âœ… TypeScriptæ”¯æŒå®Œå–„
- âœ… å›¢é˜ŸæŠ€æœ¯æ ˆå¥‘åˆ

#### Ant Designé€‰æ‹©ç†ç”±
- âœ… ä¼ä¸šçº§UIç»„ä»¶åº“ï¼ŒåŠŸèƒ½å®Œå–„
- âœ… ä¸­æ–‡å‹å¥½ï¼Œè®¾è®¡è§„èŒƒç»Ÿä¸€
- âœ… Darkä¸»é¢˜æ”¯æŒå’Œè‡ªå®šä¹‰ä¸»é¢˜èƒ½åŠ›
- âœ… æ•°æ®å¯è§†åŒ–å›¾è¡¨ç»„ä»¶é›†æˆ

---

## 4. å‰ç«¯æ¶æ„è®¾è®¡

### 4.1 ç»„ä»¶æ¶æ„
```
src/renderer/
â”œâ”€â”€ App.tsx                 # åº”ç”¨æ ¹ç»„ä»¶
â”œâ”€â”€ components/            # ç»„ä»¶ç›®å½•
â”‚   â”œâ”€â”€ Layout/           # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ MainLayout.tsx
â”‚   â”œâ”€â”€ Sidebar/          # ä¾§è¾¹æ ç»„ä»¶
â”‚   â”‚   â””â”€â”€ Sidebar.tsx
â”‚   â”œâ”€â”€ Content/          # å†…å®¹åŒºç»„ä»¶
â”‚   â”‚   â””â”€â”€ ContentArea.tsx
â”‚   â””â”€â”€ Pages/            # é¡µé¢ç»„ä»¶
â”‚       â”œâ”€â”€ Home/         # é¦–é¡µ
â”‚       â”œâ”€â”€ QnA/         # çŸ¥è¯†é—®ç­”
â”‚       â”œâ”€â”€ KnowledgeGraph/ # çŸ¥è¯†å›¾è°±
â”‚       â”œâ”€â”€ Library/      # çŸ¥è¯†åº“
â”‚       â””â”€â”€ Analytics/    # å­¦ä¹ æ•°æ®
â””â”€â”€ styles/              # æ ·å¼ç³»ç»Ÿ
    â””â”€â”€ theme.css        # ä¸»é¢˜æ ·å¼
```

### 4.2 çŠ¶æ€ç®¡ç†æ¶æ„
```typescript
// ä½¿ç”¨React Context + useReducerè¿›è¡ŒçŠ¶æ€ç®¡ç†
interface AppState {
  // ç”¨æˆ·çŠ¶æ€
  user: UserState;
  
  // UIçŠ¶æ€
  ui: {
    sidebarCollapsed: boolean;
    selectedTab: string;
    theme: 'dark' | 'light';
    loading: boolean;
  };
  
  // ä¸šåŠ¡æ•°æ®çŠ¶æ€
  documents: DocumentState;
  knowledgeGraph: KnowledgeGraphState;
  search: SearchState;
  analytics: AnalyticsState;
}

// çŠ¶æ€æ›´æ–°åŠ¨ä½œ
type AppAction = 
  | { type: 'SET_SIDEBAR_COLLAPSED'; payload: boolean }
  | { type: 'SET_SELECTED_TAB'; payload: string }
  | { type: 'ADD_DOCUMENT'; payload: Document }
  | { type: 'UPDATE_KNOWLEDGE_NODE'; payload: KnowledgeNode }
  | { type: 'SET_SEARCH_RESULTS'; payload: SearchResult[] };
```

### 4.3 è·¯ç”±è®¾è®¡
```typescript
// åŸºäºselectedTabçš„æ¡ä»¶æ¸²æŸ“è·¯ç”±
const ContentArea: React.FC = ({ selectedTab }) => {
  const renderContent = () => {
    switch (selectedTab) {
      case 'home': return <HomePage />;
      case 'qna': return <QnAPage />;
      case 'knowledge-graph': return <KnowledgeGraphPage />;
      case 'library': return <LibraryPage />;
      case 'analytics': return <AnalyticsPage />;
      default: return <HomePage />;
    }
  };

  return (
    <Suspense fallback={<Loading />}>
      {renderContent()}
    </Suspense>
  );
};
```

### 4.4 ä¸»é¢˜ç³»ç»Ÿè®¾è®¡
```css
/* CSS Variablesä¸»é¢˜ç³»ç»Ÿ */
:root {
  /* ä¸»è‰²è°ƒç³»ç»Ÿ */
  --primary-color: #38b2ac;
  --primary-dark: #329a94;
  
  /* èƒŒæ™¯è‰²å½©ç³»ç»Ÿ */
  --bg-primary: #0f0f23;
  --bg-secondary: #1a1a2e;
  --bg-gradient: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
  
  /* æ¯›ç»ç’ƒæ•ˆæœ */
  --backdrop-blur-medium: blur(15px);
  --bg-translucent-medium: rgba(26, 26, 46, 0.6);
  
  /* åŠ¨ç”»è¿‡æ¸¡ */
  --transition-standard: 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}
```

### 4.5 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
- **ä»£ç åˆ†å‰²**: ä½¿ç”¨`React.lazy()`å¯¹é¡µé¢ç»„ä»¶è¿›è¡Œæ‡’åŠ è½½
- **ç»„ä»¶ç¼“å­˜**: ä½¿ç”¨`React.memo`ç¼“å­˜çº¯ç»„ä»¶
- **è™šæ‹Ÿæ»šåŠ¨**: é•¿åˆ—è¡¨ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½
- **å›¾ç‰‡æ‡’åŠ è½½**: éå¯è§†åŒºåŸŸå›¾ç‰‡å»¶è¿ŸåŠ è½½

---

## 5. ä¸»è¿›ç¨‹æ¶æ„è®¾è®¡

### 5.1 ä¸»è¿›ç¨‹ç»“æ„
```
src/main/
â”œâ”€â”€ main.ts              # ä¸»è¿›ç¨‹å…¥å£
â”œâ”€â”€ menu.ts              # èœå•ç³»ç»Ÿ
â”œâ”€â”€ preload.ts           # é¢„åŠ è½½è„šæœ¬
â””â”€â”€ services/            # ä¸»è¿›ç¨‹æœåŠ¡
    â”œâ”€â”€ window.service.ts    # çª—å£ç®¡ç†æœåŠ¡
    â”œâ”€â”€ file.service.ts      # æ–‡ä»¶ç³»ç»ŸæœåŠ¡
    â”œâ”€â”€ database.service.ts  # æ•°æ®åº“æœåŠ¡
    â””â”€â”€ search.service.ts    # æœç´¢æœåŠ¡
```

### 5.2 çª—å£ç®¡ç†
```typescript
// çª—å£é…ç½®
const createWindow = async () => {
  mainWindow = new BrowserWindow({
    show: false,
    width: 1200,
    height: 800,
    minWidth: 800,
    minHeight: 600,
    icon: getAssetPath('icon.png'),
    webPreferences: {
      nodeIntegration: false,
      contextIsolation: true,
      enableRemoteModule: false,
      preload: path.join(__dirname, 'preload.js'),
      webSecurity: true
    },
    titleBarStyle: 'hiddenInset', // macOSæ ·å¼
    frame: process.platform !== 'darwin' // Windows/Linuxæ˜¾ç¤ºè¾¹æ¡†
  });
};
```

### 5.3 ç³»ç»Ÿé›†æˆåŠŸèƒ½
- **åŸç”Ÿèœå•**: è·¨å¹³å°èœå•ç³»ç»Ÿ
- **æ–‡ä»¶å…³è”**: æ³¨å†Œæ–‡ä»¶ç±»å‹æ‰“å¼€
- **ç³»ç»Ÿé€šçŸ¥**: åŸç”Ÿé€šçŸ¥æ¨é€
- **æ‰˜ç›˜å›¾æ ‡**: ç³»ç»Ÿæ‰˜ç›˜é›†æˆ
- **å…¨å±€å¿«æ·é”®**: å…¨å±€çƒ­é”®æ”¯æŒ
- **è‡ªåŠ¨æ›´æ–°**: electron-updateré›†æˆ

### 5.4 å®‰å…¨ç­–ç•¥
```typescript
// å®‰å…¨é…ç½®
const securityConfig = {
  nodeIntegration: false,        // ç¦ç”¨Nodeé›†æˆ
  contextIsolation: true,        // å¯ç”¨ä¸Šä¸‹æ–‡éš”ç¦»
  enableRemoteModule: false,     // ç¦ç”¨remoteæ¨¡å—
  webSecurity: true,             // å¯ç”¨Webå®‰å…¨
  allowRunningInsecureContent: false  // ç¦æ­¢ä¸å®‰å…¨å†…å®¹
};

// CSPå†…å®¹å®‰å…¨ç­–ç•¥
const cspPolicy = "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';";
```

---

## 6. æ•°æ®æ¶æ„è®¾è®¡

### 6.1 æ•°æ®å­˜å‚¨æ¶æ„
```mermaid
graph TB
    A[åº”ç”¨æ•°æ®å±‚] --> B[SQLiteå…³ç³»æ•°æ®åº“]
    A --> C[æœ¬åœ°æ–‡ä»¶å­˜å‚¨]
    A --> D[å…¨æ–‡æœç´¢ç´¢å¼•]
    A --> E[å‘é‡æ•°æ®åº“]
    
    B --> B1[ç”¨æˆ·æ•°æ®è¡¨]
    B --> B2[æ–‡æ¡£å…ƒæ•°æ®è¡¨]
    B --> B3[çŸ¥è¯†èŠ‚ç‚¹è¡¨]
    B --> B4[å…³ç³»è¡¨]
    
    C --> C1[æ–‡æ¡£æ–‡ä»¶]
    C --> C2[å›¾ç‰‡é™„ä»¶]
    C --> C3[å¤‡ä»½æ–‡ä»¶]
    
    D --> D1[å€’æ’ç´¢å¼•]
    D --> D2[åˆ†è¯ç´¢å¼•]
    
    E --> E1[æ–‡æ¡£å‘é‡]
    E --> E2[æŸ¥è¯¢å‘é‡]
```

### 6.2 æ ¸å¿ƒæ•°æ®æ¨¡å‹
```sql
-- æ–‡æ¡£è¡¨
CREATE TABLE documents (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT NOT NULL,
    content TEXT,
    file_path TEXT,
    file_type TEXT,
    file_size INTEGER,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    tags TEXT, -- JSONæ ¼å¼å­˜å‚¨æ ‡ç­¾æ•°ç»„
    metadata TEXT, -- JSONæ ¼å¼å­˜å‚¨é¢å¤–å…ƒæ•°æ®
    INDEX(created_at),
    INDEX(file_type),
    FULLTEXT(title, content)
);

-- çŸ¥è¯†èŠ‚ç‚¹è¡¨
CREATE TABLE knowledge_nodes (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT NOT NULL,
    description TEXT,
    node_type TEXT DEFAULT 'concept', -- concept, document, person, etc.
    position_x REAL DEFAULT 0,
    position_y REAL DEFAULT 0,
    color TEXT DEFAULT '#38b2ac',
    size INTEGER DEFAULT 10,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    metadata TEXT, -- JSONæ ¼å¼å­˜å‚¨èŠ‚ç‚¹å±æ€§
    INDEX(node_type),
    INDEX(created_at)
);

-- çŸ¥è¯†å…³ç³»è¡¨
CREATE TABLE knowledge_relationships (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    source_id INTEGER NOT NULL,
    target_id INTEGER NOT NULL,
    relation_type TEXT DEFAULT 'related_to', -- related_to, part_of, causes, etc.
    weight REAL DEFAULT 1.0,
    description TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (source_id) REFERENCES knowledge_nodes(id) ON DELETE CASCADE,
    FOREIGN KEY (target_id) REFERENCES knowledge_nodes(id) ON DELETE CASCADE,
    INDEX(source_id),
    INDEX(target_id),
    INDEX(relation_type)
);

-- é—®ç­”è®°å½•è¡¨
CREATE TABLE qa_records (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    question TEXT NOT NULL,
    answer TEXT,
    sources TEXT, -- JSONæ ¼å¼å­˜å‚¨æ¥æºæ–‡æ¡£IDæ•°ç»„
    confidence_score REAL DEFAULT 0.0,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    is_bookmarked BOOLEAN DEFAULT FALSE,
    FULLTEXT(question, answer),
    INDEX(created_at),
    INDEX(is_bookmarked)
);

-- æ ‡ç­¾è¡¨
CREATE TABLE tags (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT UNIQUE NOT NULL,
    color TEXT DEFAULT '#38b2ac',
    count INTEGER DEFAULT 0,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX(name)
);

-- ä½¿ç”¨ç»Ÿè®¡è¡¨
CREATE TABLE usage_stats (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    event_type TEXT NOT NULL, -- document_open, search_query, etc.
    event_data TEXT, -- JSONæ ¼å¼å­˜å‚¨äº‹ä»¶è¯¦æƒ…
    timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX(event_type),
    INDEX(timestamp)
);
```

### 6.3 æ•°æ®è®¿é—®å±‚è®¾è®¡
```typescript
// æ•°æ®è®¿é—®å±‚æ¥å£
interface DatabaseService {
  // æ–‡æ¡£ç®¡ç†
  createDocument(doc: Partial<Document>): Promise<Document>;
  updateDocument(id: number, updates: Partial<Document>): Promise<void>;
  deleteDocument(id: number): Promise<void>;
  findDocuments(query: DocumentQuery): Promise<Document[]>;
  
  // çŸ¥è¯†å›¾è°±
  createNode(node: Partial<KnowledgeNode>): Promise<KnowledgeNode>;
  createRelationship(rel: Partial<KnowledgeRelationship>): Promise<KnowledgeRelationship>;
  getGraphData(filters?: GraphFilters): Promise<GraphData>;
  
  // æœç´¢åŠŸèƒ½
  searchDocuments(query: string): Promise<SearchResult[]>;
  semanticSearch(embedding: number[]): Promise<SearchResult[]>;
  
  // ç»Ÿè®¡åˆ†æ
  getUsageStats(timeRange: TimeRange): Promise<UsageStats>;
  getDocumentStats(): Promise<DocumentStats>;
}
```

### 6.4 æ•°æ®è¿ç§»ç­–ç•¥
```typescript
// æ•°æ®åº“ç‰ˆæœ¬ç®¡ç†
interface Migration {
  version: number;
  description: string;
  up: (db: Database) => Promise<void>;
  down: (db: Database) => Promise<void>;
}

const migrations: Migration[] = [
  {
    version: 1,
    description: 'åˆå§‹æ•°æ®åº“ç»“æ„',
    up: async (db) => {
      await db.exec(createTablesSQL);
    },
    down: async (db) => {
      await db.exec(dropTablesSQL);
    }
  },
  // åç»­ç‰ˆæœ¬è¿ç§»...
];
```

---

## 7. æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 7.1 æ¨¡å—æ¶æ„å›¾
```mermaid
graph TB
    A[åº”ç”¨æ ¸å¿ƒ] --> B[æ–‡æ¡£ç®¡ç†æ¨¡å—]
    A --> C[çŸ¥è¯†å›¾è°±æ¨¡å—]
    A --> D[æ™ºèƒ½é—®ç­”æ¨¡å—]
    A --> E[å­¦ä¹ æ•°æ®æ¨¡å—]
    A --> F[æœç´¢å¼•æ“æ¨¡å—]
    
    B --> B1[æ–‡ä»¶å¯¼å…¥]
    B --> B2[æ ¼å¼è§£æ]
    B --> B3[å…ƒæ•°æ®æå–]
    B --> B4[å­˜å‚¨ç®¡ç†]
    
    C --> C1[èŠ‚ç‚¹ç®¡ç†]
    C --> C2[å…³ç³»æ„å»º]
    C --> C3[å›¾è°±æ¸²æŸ“]
    C --> C4[å¸ƒå±€ç®—æ³•]
    
    D --> D1[æŸ¥è¯¢è§£æ]
    D --> D2[è¯­ä¹‰æ£€ç´¢]
    D --> D3[ç­”æ¡ˆç”Ÿæˆ]
    D --> D4[ä¸Šä¸‹æ–‡ç®¡ç†]
    
    E --> E1[æ•°æ®æ”¶é›†]
    E --> E2[ç»Ÿè®¡è®¡ç®—]
    E --> E3[å›¾è¡¨æ¸²æŸ“]
    E --> E4[æŠ¥è¡¨å¯¼å‡º]
    
    F --> F1[ç´¢å¼•æ„å»º]
    F --> F2[æŸ¥è¯¢è§£æ]
    F --> F3[ç»“æœæ’åº]
    F --> F4[é«˜äº®æ ‡è®°]
```

### 7.2 æ–‡æ¡£ç®¡ç†æ¨¡å—
```typescript
// æ–‡æ¡£ç®¡ç†æœåŠ¡æ¥å£
interface DocumentService {
  // æ–‡æ¡£å¯¼å…¥
  importDocument(filePath: string): Promise<Document>;
  importFromClipboard(): Promise<Document>;
  batchImport(filePaths: string[]): Promise<Document[]>;
  
  // æ–‡æ¡£æ“ä½œ
  createDocument(data: CreateDocumentData): Promise<Document>;
  updateDocument(id: number, updates: UpdateDocumentData): Promise<Document>;
  deleteDocument(id: number): Promise<void>;
  
  // æ–‡æ¡£æŸ¥è¯¢
  getDocument(id: number): Promise<Document | null>;
  listDocuments(query?: DocumentQuery): Promise<Document[]>;
  getRecentDocuments(limit?: number): Promise<Document[]>;
  
  // æ–‡ä»¶æ ¼å¼æ”¯æŒ
  getSupportedFormats(): string[];
  parseDocument(filePath: string, format: string): Promise<ParsedDocument>;
  
  // å…ƒæ•°æ®ç®¡ç†
  extractMetadata(filePath: string): Promise<DocumentMetadata>;
  updateMetadata(id: number, metadata: DocumentMetadata): Promise<void>;
}

// æ”¯æŒçš„æ–‡ä»¶æ ¼å¼
const SUPPORTED_FORMATS = [
  '.pdf', '.docx', '.doc', '.txt', '.md', 
  '.rtf', '.odt', '.epub', '.html', '.xml'
];
```

### 7.3 çŸ¥è¯†å›¾è°±æ¨¡å—
```typescript
// çŸ¥è¯†å›¾è°±æœåŠ¡
interface KnowledgeGraphService {
  // èŠ‚ç‚¹ç®¡ç†
  createNode(data: CreateNodeData): Promise<KnowledgeNode>;
  updateNode(id: number, updates: UpdateNodeData): Promise<KnowledgeNode>;
  deleteNode(id: number): Promise<void>;
  
  // å…³ç³»ç®¡ç†
  createRelationship(data: CreateRelationshipData): Promise<KnowledgeRelationship>;
  updateRelationship(id: number, updates: UpdateRelationshipData): Promise<KnowledgeRelationship>;
  deleteRelationship(id: number): Promise<void>;
  
  // å›¾è°±æŸ¥è¯¢
  getGraphData(filters?: GraphFilters): Promise<GraphData>;
  getNodeNeighbors(nodeId: number, depth?: number): Promise<GraphData>;
  findShortestPath(sourceId: number, targetId: number): Promise<KnowledgeNode[]>;
  
  // å›¾è°±åˆ†æ
  calculateNodeImportance(): Promise<Map<number, number>>;
  detectCommunities(): Promise<Map<number, number>>;
  getGraphMetrics(): Promise<GraphMetrics>;
  
  // å¸ƒå±€ç®—æ³•
  applyForceDirectedLayout(data: GraphData): Promise<GraphData>;
  applyHierarchicalLayout(data: GraphData): Promise<GraphData>;
}

// å›¾è°±å¯è§†åŒ–ç»„ä»¶
const KnowledgeGraphViewer: React.FC<KnowledgeGraphViewerProps> = ({
  data,
  onNodeClick,
  onNodeDrag,
  layout = 'force-directed'
}) => {
  // ä½¿ç”¨@antv/g6è¿›è¡Œå›¾è°±æ¸²æŸ“
  // æ”¯æŒç¼©æ”¾ã€æ‹–æ‹½ã€é€‰æ‹©ç­‰äº¤äº’
  // æ”¯æŒä¸åŒå¸ƒå±€ç®—æ³•åˆ‡æ¢
};
```

### 7.4 æ™ºèƒ½é—®ç­”æ¨¡å—
```typescript
// AIé—®ç­”æœåŠ¡
interface QnAService {
  // é—®ç­”å¤„ç†
  askQuestion(question: string, context?: QueryContext): Promise<QnAResult>;
  getQuestionSuggestions(input: string): Promise<string[]>;
  
  // å‘é‡åŒ–æœåŠ¡
  embedText(text: string): Promise<number[]>;
  batchEmbedTexts(texts: string[]): Promise<number[][]>;
  
  // è¯­ä¹‰æœç´¢
  semanticSearch(query: string, limit?: number): Promise<SearchResult[]>;
  similaritySearch(embedding: number[], limit?: number): Promise<SearchResult[]>;
  
  // ä¸Šä¸‹æ–‡ç®¡ç†
  buildContext(searchResults: SearchResult[]): string;
  extractKeywords(text: string): Promise<string[]>;
  
  // ç­”æ¡ˆç”Ÿæˆ
  generateAnswer(question: string, context: string): Promise<string>;
  improveAnswer(answer: string, feedback: AnswerFeedback): Promise<string>;
}

// æœ¬åœ°AIæ¨¡å‹é…ç½®
interface AIModelConfig {
  embeddingModel: {
    name: string;
    path: string;
    dimensions: number;
  };
  languageModel?: {
    name: string;
    path: string;
    maxTokens: number;
  };
  useLocalModel: boolean;
  apiEndpoint?: string;
}
```

### 7.5 æœç´¢å¼•æ“æ¨¡å—
```typescript
// æœç´¢æœåŠ¡æ¥å£
interface SearchService {
  // å…¨æ–‡æœç´¢
  fullTextSearch(query: string, options?: SearchOptions): Promise<SearchResult[]>;
  
  // é«˜çº§æœç´¢
  advancedSearch(criteria: SearchCriteria): Promise<SearchResult[]>;
  
  // ç´¢å¼•ç®¡ç†
  buildIndex(documents: Document[]): Promise<void>;
  updateIndex(document: Document): Promise<void>;
  removeFromIndex(documentId: number): Promise<void>;
  
  // æœç´¢å»ºè®®
  getSearchSuggestions(input: string): Promise<string[]>;
  getPopularQueries(): Promise<string[]>;
  
  // æœç´¢å†å²
  saveSearchHistory(query: string, results: SearchResult[]): Promise<void>;
  getSearchHistory(limit?: number): Promise<SearchHistory[]>;
}

// æœç´¢é…ç½®
const searchConfig = {
  // Lunr.jsé…ç½®
  lunr: {
    pipeline: ['stopWordFilter', 'stemmer'],
    fields: {
      title: { boost: 10 },
      content: { boost: 1 },
      tags: { boost: 5 }
    }
  },
  
  // å‘é‡æœç´¢é…ç½®
  vector: {
    dimensions: 384,
    indexType: 'hnsw',
    similarity: 'cosine'
  }
};
```

---

## 8. é€šä¿¡æœºåˆ¶è®¾è®¡

### 8.1 IPCé€šä¿¡æ¶æ„
```typescript
// IPCé€šé“å®šä¹‰
interface IPCChannels {
  // æ–‡æ¡£æ“ä½œ
  'document:import': {
    request: { filePath: string };
    response: Document;
  };
  'document:list': {
    request: { query?: DocumentQuery };
    response: Document[];
  };
  'document:delete': {
    request: { id: number };
    response: void;
  };
  
  // æœç´¢åŠŸèƒ½
  'search:fulltext': {
    request: { query: string; options?: SearchOptions };
    response: SearchResult[];
  };
  'search:semantic': {
    request: { query: string; limit?: number };
    response: SearchResult[];
  };
  
  // çŸ¥è¯†å›¾è°±
  'graph:getData': {
    request: { filters?: GraphFilters };
    response: GraphData;
  };
  'graph:createNode': {
    request: CreateNodeData;
    response: KnowledgeNode;
  };
  
  // AIé—®ç­”
  'qa:ask': {
    request: { question: string; context?: QueryContext };
    response: QnAResult;
  };
  
  // ç»Ÿè®¡åˆ†æ
  'analytics:getStats': {
    request: { timeRange?: TimeRange };
    response: UsageStats;
  };
}
```

### 8.2 IPCå®‰å…¨å°è£…
```typescript
// é¢„åŠ è½½è„šæœ¬APIæš´éœ²
const electronAPI = {
  // æ–‡æ¡£æ“ä½œ
  documents: {
    import: (filePath: string) => ipcRenderer.invoke('document:import', { filePath }),
    list: (query?: DocumentQuery) => ipcRenderer.invoke('document:list', { query }),
    delete: (id: number) => ipcRenderer.invoke('document:delete', { id }),
  },
  
  // æœç´¢åŠŸèƒ½
  search: {
    fullText: (query: string, options?: SearchOptions) => 
      ipcRenderer.invoke('search:fulltext', { query, options }),
    semantic: (query: string, limit?: number) => 
      ipcRenderer.invoke('search:semantic', { query, limit }),
  },
  
  // ç³»ç»ŸåŠŸèƒ½
  system: {
    openFile: (filePath: string) => ipcRenderer.invoke('system:openFile', { filePath }),
    showInFolder: (filePath: string) => ipcRenderer.invoke('system:showInFolder', { filePath }),
  }
};

// ç±»å‹å®‰å…¨çš„APIè°ƒç”¨
contextBridge.exposeInMainWorld('electronAPI', electronAPI);
```

### 8.3 é”™è¯¯å¤„ç†æœºåˆ¶
```typescript
// IPCé”™è¯¯å¤„ç†
class IPCError extends Error {
  constructor(
    message: string,
    public code: string,
    public channel: string
  ) {
    super(message);
    this.name = 'IPCError';
  }
}

// ç»Ÿä¸€é”™è¯¯å¤„ç†
const handleIPCError = (channel: string, error: any): IPCError => {
  console.error(`IPC Error in ${channel}:`, error);
  
  return new IPCError(
    error.message || 'Unknown IPC error',
    error.code || 'UNKNOWN_ERROR',
    channel
  );
};
```

---

## 9. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 9.1 æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–

#### Reactæ€§èƒ½ä¼˜åŒ–
```typescript
// ç»„ä»¶æ‡’åŠ è½½
const HomePage = lazy(() => import('../Pages/Home/HomePage'));
const QnAPage = lazy(() => import('../Pages/QnA/QnAPage'));

// ç»„ä»¶ç¼“å­˜
const MemoizedDocumentList = React.memo(DocumentList, (prev, next) => {
  return prev.documents.length === next.documents.length &&
         prev.searchQuery === next.searchQuery;
});

// è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–
const VirtualizedDocumentList: React.FC<{documents: Document[]}> = ({ documents }) => {
  const { height, width } = useWindowSize();
  
  return (
    <FixedSizeList
      height={height - 200}
      width={width}
      itemCount={documents.length}
      itemSize={80}
      overscanCount={5}
    >
      {({ index, style }) => (
        <div style={style}>
          <DocumentItem document={documents[index]} />
        </div>
      )}
    </FixedSizeList>
  );
};
```

#### CSSæ€§èƒ½ä¼˜åŒ–
```css
/* GPUåŠ é€Ÿå…³é”®åŠ¨ç”» */
.nav-item {
  will-change: transform, opacity;
  transform: translateZ(0); /* å¼ºåˆ¶GPUåŠ é€Ÿ */
}

/* å‡å°‘é‡æ’çš„è¿‡æ¸¡åŠ¨ç”» */
.hover-lift {
  transition: transform var(--transition-fast);
}

.hover-lift:hover {
  transform: translateY(-2px) translateZ(0);
}

/* ä¼˜åŒ–æ¯›ç»ç’ƒæ•ˆæœæ€§èƒ½ */
.glass-effect {
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  /* åœ¨ä½æ€§èƒ½è®¾å¤‡ä¸Šå›é€€ */
}

@media (prefers-reduced-motion: reduce) {
  .glass-effect {
    backdrop-filter: none;
    background: var(--bg-translucent-heavy);
  }
}
```

### 9.2 æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–
```sql
-- å…³é”®å­—æ®µç´¢å¼•
CREATE INDEX idx_documents_created_at ON documents(created_at);
CREATE INDEX idx_documents_file_type ON documents(file_type);
CREATE INDEX idx_documents_tags ON documents(tags);

-- å…¨æ–‡æœç´¢ç´¢å¼•
CREATE VIRTUAL TABLE documents_fts USING fts5(
  title, content, tags,
  content='documents',
  content_rowid='id'
);

-- å¤åˆç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢
CREATE INDEX idx_qa_created_bookmarked ON qa_records(created_at, is_bookmarked);

-- åˆ†åŒºè¡¨ä¼˜åŒ–å¤§æ•°æ®é‡
-- (æ ¹æ®å®é™…æ•°æ®é‡è€ƒè™‘å®æ–½)
```

### 9.3 å†…å­˜ç®¡ç†ä¼˜åŒ–
```typescript
// ç¼“å­˜ç®¡ç†
class CacheManager {
  private cache = new Map<string, { data: any; timestamp: number; ttl: number }>();
  private maxSize = 1000;
  
  set(key: string, data: any, ttl = 5 * 60 * 1000) { // 5åˆ†é’ŸTTL
    if (this.cache.size >= this.maxSize) {
      this.evictOldest();
    }
    
    this.cache.set(key, {
      data,
      timestamp: Date.now(),
      ttl
    });
  }
  
  get(key: string): any | null {
    const item = this.cache.get(key);
    if (!item) return null;
    
    if (Date.now() - item.timestamp > item.ttl) {
      this.cache.delete(key);
      return null;
    }
    
    return item.data;
  }
  
  private evictOldest() {
    let oldest = Date.now();
    let oldestKey = '';
    
    for (const [key, item] of this.cache) {
      if (item.timestamp < oldest) {
        oldest = item.timestamp;
        oldestKey = key;
      }
    }
    
    if (oldestKey) {
      this.cache.delete(oldestKey);
    }
  }
}
```

### 9.4 å¯åŠ¨æ€§èƒ½ä¼˜åŒ–
```typescript
// å»¶è¿Ÿåˆå§‹åŒ–éå…³é”®æœåŠ¡
class AppInitializer {
  private criticalServices: Service[] = [];
  private deferredServices: Service[] = [];
  
  async initializeCritical() {
    // åˆå§‹åŒ–å…³é”®æœåŠ¡ï¼šUIã€åŸºç¡€æ•°æ®åº“è¿æ¥
    await Promise.all(this.criticalServices.map(service => service.initialize()));
  }
  
  async initializeDeferred() {
    // å»¶è¿Ÿåˆå§‹åŒ–ï¼šæœç´¢ç´¢å¼•ã€AIæœåŠ¡ç­‰
    for (const service of this.deferredServices) {
      await service.initialize();
      // ç»™UIå“åº”æ—¶é—´
      await new Promise(resolve => setTimeout(resolve, 10));
    }
  }
}

// é¢„åŠ è½½å…³é”®èµ„æº
const preloadCriticalResources = async () => {
  // é¢„åŠ è½½å…³é”®ç»„ä»¶
  await Promise.all([
    import('../components/Layout/MainLayout'),
    import('../components/Sidebar/Sidebar')
  ]);
  
  // é¢„åŠ è½½å…³é”®æ•°æ®
  await Promise.all([
    databaseService.getRecentDocuments(10),
    databaseService.getUsageStats({ days: 7 })
  ]);
};
```

---

## 10. å®‰å…¨æ¶æ„è®¾è®¡

### 10.1 Electronå®‰å…¨é…ç½®
```typescript
// å®‰å…¨çš„BrowserWindowé…ç½®
const createSecureWindow = () => {
  return new BrowserWindow({
    webPreferences: {
      nodeIntegration: false,              // ç¦ç”¨Node.jsé›†æˆ
      contextIsolation: true,              // å¯ç”¨ä¸Šä¸‹æ–‡éš”ç¦»
      enableRemoteModule: false,           // ç¦ç”¨remoteæ¨¡å—
      webSecurity: true,                   // å¯ç”¨ç½‘é¡µå®‰å…¨
      allowRunningInsecureContent: false,  // ç¦æ­¢ä¸å®‰å…¨å†…å®¹
      experimentalFeatures: false,         // ç¦ç”¨å®éªŒæ€§åŠŸèƒ½
      preload: path.join(__dirname, 'preload.js')
    }
  });
};

// CSPå†…å®¹å®‰å…¨ç­–ç•¥
const cspConfig = {
  'default-src': ["'self'"],
  'script-src': ["'self'", "'unsafe-inline'"],
  'style-src': ["'self'", "'unsafe-inline'"],
  'img-src': ["'self'", "data:", "file:"],
  'media-src': ["'none'"],
  'object-src': ["'none'"],
  'child-src': ["'none'"],
  'worker-src': ["'none'"],
  'connect-src': ["'self'"]
};
```

### 10.2 æ•°æ®å®‰å…¨
```typescript
// æ•°æ®åŠ å¯†æœåŠ¡
interface EncryptionService {
  // æ•æ„Ÿæ•°æ®åŠ å¯†
  encrypt(data: string, key?: string): Promise<string>;
  decrypt(encryptedData: string, key?: string): Promise<string>;
  
  // æ–‡ä»¶åŠ å¯†
  encryptFile(filePath: string, outputPath: string): Promise<void>;
  decryptFile(encryptedFilePath: string, outputPath: string): Promise<void>;
  
  // å¯†é’¥ç®¡ç†
  generateKey(): string;
  deriveKeyFromPassword(password: string, salt: string): Promise<string>;
}

// æœ¬åœ°æ•°æ®å¤‡ä»½
interface BackupService {
  // è‡ªåŠ¨å¤‡ä»½
  scheduleAutoBackup(intervalHours: number): void;
  createBackup(backupPath?: string): Promise<string>;
  
  // å¤‡ä»½æ¢å¤
  restoreFromBackup(backupPath: string): Promise<void>;
  validateBackup(backupPath: string): Promise<boolean>;
  
  // å¢é‡å¤‡ä»½
  createIncrementalBackup(lastBackupTime: Date): Promise<string>;
}
```

### 10.3 è¾“å…¥éªŒè¯å’Œæ¸…ç†
```typescript
// è¾“å…¥éªŒè¯æœåŠ¡
class InputValidator {
  // æ–‡ä»¶è·¯å¾„éªŒè¯
  static validateFilePath(filePath: string): boolean {
    // é˜²æ­¢è·¯å¾„éå†æ”»å‡»
    const normalizedPath = path.normalize(filePath);
    return !normalizedPath.includes('../') && 
           !normalizedPath.startsWith('/') &&
           path.isAbsolute(normalizedPath);
  }
  
  // SQLæ³¨å…¥é˜²æŠ¤
  static sanitizeSQLInput(input: string): string {
    return input.replace(/['";\\]/g, '');
  }
  
  // HTML/XSSé˜²æŠ¤
  static sanitizeHTML(html: string): string {
    return html
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;')
      .replace(/"/g, '&quot;')
      .replace(/'/g, '&#x27;');
  }
  
  // æ–‡ä»¶ç±»å‹éªŒè¯
  static validateFileType(filePath: string, allowedTypes: string[]): boolean {
    const ext = path.extname(filePath).toLowerCase();
    return allowedTypes.includes(ext);
  }
}
```

### 10.4 è®¿é—®æ§åˆ¶
```typescript
// æƒé™ç®¡ç†
interface PermissionManager {
  // æ–‡ä»¶ç³»ç»Ÿè®¿é—®æƒé™
  checkFileAccess(filePath: string, operation: 'read' | 'write' | 'delete'): boolean;
  
  // ç½‘ç»œè®¿é—®æƒé™
  checkNetworkAccess(url: string): boolean;
  
  // ç³»ç»ŸAPIè®¿é—®æƒé™
  checkSystemAPIAccess(api: string): boolean;
}

// å®‰å…¨ä¸Šä¸‹æ–‡
class SecurityContext {
  private allowedDirectories: string[] = [];
  private allowedNetworkHosts: string[] = [];
  
  constructor(config: SecurityConfig) {
    this.allowedDirectories = config.allowedDirectories || [];
    this.allowedNetworkHosts = config.allowedNetworkHosts || [];
  }
  
  validateFileAccess(filePath: string): boolean {
    return this.allowedDirectories.some(dir => 
      path.normalize(filePath).startsWith(path.normalize(dir))
    );
  }
}
```

---

## 11. éƒ¨ç½²ä¸åˆ†å‘

### 11.1 æ„å»ºé…ç½®
```json
{
  "build": {
    "productName": "è¶£çŸ¥æ¡Œé¢ç‰ˆ",
    "appId": "com.funknowledge.desktop",
    "asar": true,
    "directories": {
      "app": "release/app",
      "buildResources": "assets",
      "output": "release/build"
    },
    "files": [
      "dist",
      "node_modules",
      "package.json"
    ],
    "extraResources": [
      "./assets/**",
      "./models/**"
    ],
    "mac": {
      "target": [
        {
          "target": "dmg",
          "arch": ["arm64", "x64"]
        },
        {
          "target": "zip",
          "arch": ["arm64", "x64"]
        }
      ],
      "category": "public.app-category.productivity",
      "hardenedRuntime": true,
      "gatekeeperAssess": false,
      "notarize": {
        "teamId": "YOUR_TEAM_ID"
      }
    },
    "win": {
      "target": [
        {
          "target": "nsis",
          "arch": ["x64", "ia32"]
        },
        {
          "target": "portable",
          "arch": ["x64"]
        }
      ],
      "publisherName": "FunKnowledge Inc."
    },
    "linux": {
      "target": [
        {
          "target": "AppImage",
          "arch": ["x64"]
        },
        {
          "target": "deb",
          "arch": ["x64"]
        }
      ],
      "category": "Office"
    },
    "nsis": {
      "oneClick": false,
      "perMachine": false,
      "allowToChangeInstallationDirectory": true,
      "createDesktopShortcut": true,
      "createStartMenuShortcut": true
    }
  }
}
```

### 11.2 è‡ªåŠ¨æ›´æ–°æœºåˆ¶
```typescript
// è‡ªåŠ¨æ›´æ–°é…ç½®
class UpdateManager {
  private autoUpdater: AutoUpdater;
  
  constructor() {
    this.autoUpdater = new AutoUpdater();
    this.setupUpdateHandlers();
  }
  
  private setupUpdateHandlers() {
    // æ£€æŸ¥æ›´æ–°
    this.autoUpdater.checkForUpdatesAndNotify();
    
    // æ›´æ–°äº‹ä»¶å¤„ç†
    this.autoUpdater.on('checking-for-update', () => {
      log.info('æ£€æŸ¥æ›´æ–°ä¸­...');
    });
    
    this.autoUpdater.on('update-available', (info) => {
      log.info('å‘ç°æ–°ç‰ˆæœ¬:', info.version);
      this.showUpdateDialog(info);
    });
    
    this.autoUpdater.on('update-not-available', () => {
      log.info('å½“å‰å·²æ˜¯æœ€æ–°ç‰ˆæœ¬');
    });
    
    this.autoUpdater.on('download-progress', (progress) => {
      this.updateProgressBar(progress.percent);
    });
    
    this.autoUpdater.on('update-downloaded', () => {
      this.showRestartDialog();
    });
  }
  
  private showUpdateDialog(updateInfo: UpdateInfo) {
    const result = dialog.showMessageBoxSync(mainWindow!, {
      type: 'info',
      buttons: ['ç«‹å³æ›´æ–°', 'ç¨åæé†’'],
      title: 'å‘ç°æ–°ç‰ˆæœ¬',
      message: `å‘ç°æ–°ç‰ˆæœ¬ ${updateInfo.version}`,
      detail: updateInfo.releaseNotes as string
    });
    
    if (result === 0) {
      this.autoUpdater.downloadUpdate();
    }
  }
}
```

### 11.3 CI/CDæµæ°´çº¿
```yaml
# GitHub Actionså·¥ä½œæµç¤ºä¾‹
name: Build and Release

on:
  push:
    tags:
      - 'v*'

jobs:
  build:
    strategy:
      matrix:
        os: [macos-latest, windows-latest, ubuntu-latest]
    
    runs-on: ${{ matrix.os }}
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run tests
        run: npm test
      
      - name: Build application
        run: npm run build
      
      - name: Package application
        run: npm run package
      
      - name: Upload artifacts
        uses: actions/upload-artifact@v3
        with:
          name: ${{ matrix.os }}-build
          path: release/build/
      
      - name: Create Release
        if: startsWith(github.ref, 'refs/tags/')
        uses: softprops/action-gh-release@v1
        with:
          files: release/build/*
```

---

## 12. å¼€å‘å·¥å…·é“¾

### 12.1 å¼€å‘ç¯å¢ƒé…ç½®
```json
{
  "scripts": {
    "start": "concurrently \"npm run start:renderer\" \"npm run start:main\"",
    "start:renderer": "webpack serve --config webpack.renderer.dev.js",
    "start:main": "electron -r ts-node/register src/main/main.dev.ts",
    "build": "concurrently \"npm run build:renderer\" \"npm run build:main\"",
    "build:renderer": "webpack --config webpack.renderer.prod.js",
    "build:main": "webpack --config webpack.main.prod.js",
    "test": "jest",
    "test:watch": "jest --watch",
    "lint": "eslint . --ext .ts,.tsx",
    "lint:fix": "eslint . --ext .ts,.tsx --fix",
    "type-check": "tsc --noEmit"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.0.0",
    "@typescript-eslint/parser": "^5.0.0",
    "eslint": "^8.0.0",
    "eslint-config-airbnb-typescript": "^17.0.0",
    "prettier": "^2.5.0",
    "husky": "^7.0.0",
    "lint-staged": "^12.0.0"
  }
}
```

### 12.2 ä»£ç è´¨é‡å·¥å…·
```typescript
// ESLinté…ç½®
module.exports = {
  extends: [
    'airbnb-typescript',
    '@typescript-eslint/recommended',
    'prettier'
  ],
  parser: '@typescript-eslint/parser',
  parserOptions: {
    project: './tsconfig.json',
    ecmaVersion: 2020,
    sourceType: 'module'
  },
  rules: {
    // è‡ªå®šä¹‰è§„åˆ™
    '@typescript-eslint/no-unused-vars': ['error', { argsIgnorePattern: '^_' }],
    'react/react-in-jsx-scope': 'off',
    'import/prefer-default-export': 'off'
  }
};

// Prettieré…ç½®
module.exports = {
  semi: true,
  trailingComma: 'es5',
  singleQuote: true,
  printWidth: 100,
  tabWidth: 2,
  useTabs: false
};
```

### 12.3 è°ƒè¯•é…ç½®
```json
// VSCodeè°ƒè¯•é…ç½®
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Debug Main Process",
      "type": "node",
      "request": "launch",
      "cwd": "${workspaceFolder}",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "start:main"],
      "skipFiles": ["<node_internals>/**"]
    },
    {
      "name": "Debug Renderer Process",
      "type": "chrome",
      "request": "launch",
      "url": "http://localhost:3000",
      "webRoot": "${workspaceFolder}/src/renderer"
    }
  ]
}
```

### 12.4 Gitå·¥ä½œæµ
```bash
# Gitæäº¤è§„èŒƒ
# feat: æ–°åŠŸèƒ½
# fix: ä¿®å¤bug
# docs: æ–‡æ¡£æ›´æ–°
# style: ä»£ç æ ¼å¼è°ƒæ•´
# refactor: é‡æ„
# test: æµ‹è¯•ç›¸å…³
# chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·å˜åŠ¨

# ç¤ºä¾‹æäº¤ä¿¡æ¯
git commit -m "feat(search): æ·»åŠ è¯­ä¹‰æœç´¢åŠŸèƒ½"
git commit -m "fix(ui): ä¿®å¤ä¾§è¾¹æ æŠ˜å çŠ¶æ€é—®é¢˜"
git commit -m "docs(arch): æ›´æ–°æ¶æ„è®¾è®¡æ–‡æ¡£"
```

---

## 13. ç›‘æ§ä¸æ—¥å¿—

### 13.1 æ—¥å¿—ç³»ç»Ÿ
```typescript
// æ—¥å¿—é…ç½®
import log from 'electron-log';

// ä¸»è¿›ç¨‹æ—¥å¿—é…ç½®
log.transports.file.level = 'info';
log.transports.file.maxSize = 10 * 1024 * 1024; // 10MB
log.transports.file.format = '{y}-{m}-{d} {h}:{i}:{s} [{level}] {text}';
log.transports.file.archiveLog = (file) => {
  file.clear();
};

// æ—¥å¿—æœåŠ¡å°è£…
class LoggerService {
  private logger = log.scope('main');
  
  info(message: string, ...args: any[]) {
    this.logger.info(message, ...args);
  }
  
  error(message: string, error?: Error, ...args: any[]) {
    if (error) {
      this.logger.error(message, error.stack, ...args);
    } else {
      this.logger.error(message, ...args);
    }
  }
  
  warn(message: string, ...args: any[]) {
    this.logger.warn(message, ...args);
  }
  
  debug(message: string, ...args: any[]) {
    this.logger.debug(message, ...args);
  }
}
```

### 13.2 æ€§èƒ½ç›‘æ§
```typescript
// æ€§èƒ½ç›‘æ§æœåŠ¡
class PerformanceMonitor {
  private metrics = new Map<string, PerformanceEntry[]>();
  
  startTiming(name: string) {
    performance.mark(`${name}-start`);
  }
  
  endTiming(name: string) {
    performance.mark(`${name}-end`);
    performance.measure(name, `${name}-start`, `${name}-end`);
    
    const measure = performance.getEntriesByName(name)[0];
    this.recordMetric(name, measure);
  }
  
  private recordMetric(name: string, entry: PerformanceEntry) {
    if (!this.metrics.has(name)) {
      this.metrics.set(name, []);
    }
    
    const entries = this.metrics.get(name)!;
    entries.push(entry);
    
    // ä¿ç•™æœ€è¿‘100æ¡è®°å½•
    if (entries.length > 100) {
      entries.shift();
    }
  }
  
  getMetricSummary(name: string) {
    const entries = this.metrics.get(name) || [];
    if (entries.length === 0) return null;
    
    const durations = entries.map(e => e.duration);
    return {
      count: entries.length,
      min: Math.min(...durations),
      max: Math.max(...durations),
      avg: durations.reduce((a, b) => a + b, 0) / durations.length,
      p95: this.percentile(durations, 0.95)
    };
  }
  
  private percentile(arr: number[], p: number): number {
    const sorted = arr.slice().sort((a, b) => a - b);
    const index = Math.ceil(sorted.length * p) - 1;
    return sorted[index];
  }
}
```

### 13.3 é”™è¯¯ç›‘æ§
```typescript
// é”™è¯¯ç›‘æ§å’ŒæŠ¥å‘Š
class ErrorReporter {
  private errorQueue: ErrorReport[] = [];
  
  captureError(error: Error, context?: ErrorContext) {
    const report: ErrorReport = {
      message: error.message,
      stack: error.stack,
      timestamp: Date.now(),
      context: {
        platform: process.platform,
        arch: process.arch,
        version: app.getVersion(),
        ...context
      }
    };
    
    this.errorQueue.push(report);
    this.processErrorQueue();
  }
  
  private async processErrorQueue() {
    if (this.errorQueue.length === 0) return;
    
    const errors = this.errorQueue.splice(0, 10); // æ‰¹é‡å¤„ç†
    
    try {
      // è®°å½•åˆ°æœ¬åœ°æ—¥å¿—
      for (const error of errors) {
        log.error('Application Error:', error);
      }
      
      // å¯é€‰ï¼šå‘é€åˆ°é”™è¯¯ç›‘æ§æœåŠ¡
      // await this.sendToMonitoringService(errors);
    } catch (e) {
      log.error('Failed to process error queue:', e);
    }
  }
}

// å…¨å±€é”™è¯¯å¤„ç†
process.on('uncaughtException', (error) => {
  errorReporter.captureError(error, { type: 'uncaughtException' });
});

process.on('unhandledRejection', (reason, promise) => {
  errorReporter.captureError(
    new Error(`Unhandled Rejection: ${reason}`),
    { type: 'unhandledRejection', promise: promise.toString() }
  );
});
```

---

## 14. æ‰©å±•æ€§è®¾è®¡

### 14.1 æ’ä»¶ç³»ç»Ÿæ¶æ„
```typescript
// æ’ä»¶æ¥å£å®šä¹‰
interface PluginAPI {
  // æ–‡æ¡£æ“ä½œ
  documents: {
    onDocumentImported: (callback: (doc: Document) => void) => void;
    onDocumentUpdated: (callback: (doc: Document) => void) => void;
    registerDocumentProcessor: (processor: DocumentProcessor) => void;
  };
  
  // UIæ‰©å±•
  ui: {
    addMenuItem: (item: MenuItem) => void;
    addToolbarButton: (button: ToolbarButton) => void;
    addSidebarPanel: (panel: SidebarPanel) => void;
  };
  
  // æ•°æ®è®¿é—®
  data: {
    query: (sql: string, params?: any[]) => Promise<any[]>;
    createTable: (schema: TableSchema) => Promise<void>;
  };
  
  // å·¥å…·å‡½æ•°
  utils: {
    showNotification: (message: string, type?: 'info' | 'warning' | 'error') => void;
    openDialog: (options: DialogOptions) => Promise<any>;
    httpRequest: (options: RequestOptions) => Promise<any>;
  };
}

// æ’ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†
class PluginManager {
  private plugins = new Map<string, PluginInstance>();
  private api: PluginAPI;
  
  constructor(api: PluginAPI) {
    this.api = api;
  }
  
  async loadPlugin(pluginPath: string): Promise<void> {
    try {
      const plugin = await import(pluginPath);
      const instance = new plugin.default();
      
      // æ’ä»¶åˆå§‹åŒ–
      await instance.activate(this.api);
      
      this.plugins.set(instance.id, instance);
      log.info(`Plugin loaded: ${instance.name}`);
    } catch (error) {
      log.error(`Failed to load plugin: ${pluginPath}`, error);
    }
  }
  
  async unloadPlugin(pluginId: string): Promise<void> {
    const plugin = this.plugins.get(pluginId);
    if (!plugin) return;
    
    try {
      await plugin.deactivate();
      this.plugins.delete(pluginId);
      log.info(`Plugin unloaded: ${plugin.name}`);
    } catch (error) {
      log.error(`Failed to unload plugin: ${pluginId}`, error);
    }
  }
  
  getInstalledPlugins(): PluginInfo[] {
    return Array.from(this.plugins.values()).map(plugin => ({
      id: plugin.id,
      name: plugin.name,
      version: plugin.version,
      description: plugin.description,
      enabled: plugin.enabled
    }));
  }
}
```

### 14.2 APIå¼€æ”¾è®¾è®¡
```typescript
// å¼€æ”¾APIæ¥å£
interface PublicAPI {
  // ç‰ˆæœ¬ä¿¡æ¯
  version: string;
  
  // æ–‡æ¡£ç®¡ç†API
  documents: {
    create: (data: CreateDocumentData) => Promise<Document>;
    update: (id: number, data: UpdateDocumentData) => Promise<Document>;
    delete: (id: number) => Promise<void>;
    list: (query?: DocumentQuery) => Promise<Document[]>;
    search: (query: string) => Promise<SearchResult[]>;
  };
  
  // çŸ¥è¯†å›¾è°±API
  knowledgeGraph: {
    getNodes: (filters?: NodeFilters) => Promise<KnowledgeNode[]>;
    getRelationships: (filters?: RelationshipFilters) => Promise<KnowledgeRelationship[]>;
    createNode: (data: CreateNodeData) => Promise<KnowledgeNode>;
    createRelationship: (data: CreateRelationshipData) => Promise<KnowledgeRelationship>;
  };
  
  // æœç´¢API
  search: {
    fullText: (query: string, options?: SearchOptions) => Promise<SearchResult[]>;
    semantic: (query: string, options?: SearchOptions) => Promise<SearchResult[]>;
    getSuggestions: (input: string) => Promise<string[]>;
  };
  
  // ç»Ÿè®¡åˆ†æAPI
  analytics: {
    getUsageStats: (timeRange?: TimeRange) => Promise<UsageStats>;
    getDocumentStats: () => Promise<DocumentStats>;
    getSearchStats: (timeRange?: TimeRange) => Promise<SearchStats>;
  };
}

// APIç‰ˆæœ¬ç®¡ç†
class APIVersionManager {
  private versions = new Map<string, PublicAPI>();
  
  registerVersion(version: string, api: PublicAPI) {
    this.versions.set(version, api);
  }
  
  getAPI(version: string): PublicAPI | null {
    return this.versions.get(version) || null;
  }
  
  getLatestAPI(): PublicAPI {
    const versions = Array.from(this.versions.keys()).sort();
    const latestVersion = versions[versions.length - 1];
    return this.versions.get(latestVersion)!;
  }
}
```

### 14.3 ä¸»é¢˜ç³»ç»Ÿæ‰©å±•
```typescript
// ä¸»é¢˜ç³»ç»Ÿæ¥å£
interface ThemeSystem {
  // ä¸»é¢˜ç®¡ç†
  registerTheme: (theme: Theme) => void;
  setActiveTheme: (themeId: string) => void;
  getAvailableThemes: () => Theme[];
  
  // åŠ¨æ€æ ·å¼
  updateThemeVariable: (variable: string, value: string) => void;
  getThemeVariable: (variable: string) => string;
  
  // ä¸»é¢˜å¯¼å…¥å¯¼å‡º
  exportTheme: (themeId: string) => Promise<ThemeConfig>;
  importTheme: (themeConfig: ThemeConfig) => Promise<string>;
}

// ä¸»é¢˜é…ç½®
interface Theme {
  id: string;
  name: string;
  description: string;
  variables: Record<string, string>;
  customCSS?: string;
}

// å†…ç½®ä¸»é¢˜
const builtinThemes: Theme[] = [
  {
    id: 'dark-default',
    name: 'æ·±è‰²é»˜è®¤',
    description: 'é»˜è®¤æ·±è‰²ä¸»é¢˜',
    variables: {
      '--primary-color': '#38b2ac',
      '--bg-primary': '#0f0f23',
      '--bg-secondary': '#1a1a2e',
      '--text-primary': '#ffffff'
    }
  },
  {
    id: 'light-default',
    name: 'æµ…è‰²é»˜è®¤',
    description: 'æµ…è‰²ä¸»é¢˜',
    variables: {
      '--primary-color': '#38b2ac',
      '--bg-primary': '#ffffff',
      '--bg-secondary': '#f5f5f5',
      '--text-primary': '#333333'
    }
  }
];
```

---

## 15. æµ‹è¯•ç­–ç•¥

### 15.1 æµ‹è¯•æ¶æ„
```
æµ‹è¯•ä½“ç³»
â”œâ”€â”€ å•å…ƒæµ‹è¯• (Jest + Testing Library)
â”‚   â”œâ”€â”€ ç»„ä»¶æµ‹è¯•
â”‚   â”œâ”€â”€ æœåŠ¡æµ‹è¯•
â”‚   â””â”€â”€ å·¥å…·å‡½æ•°æµ‹è¯•
â”œâ”€â”€ é›†æˆæµ‹è¯• (Jest + Spectron)
â”‚   â”œâ”€â”€ IPCé€šä¿¡æµ‹è¯•
â”‚   â”œâ”€â”€ æ•°æ®åº“é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ æ–‡ä»¶ç³»ç»Ÿæµ‹è¯•
â”œâ”€â”€ ç«¯åˆ°ç«¯æµ‹è¯• (Playwright)
â”‚   â”œâ”€â”€ ç”¨æˆ·æµç¨‹æµ‹è¯•
â”‚   â”œâ”€â”€ è·¨å¹³å°æµ‹è¯•
â”‚   â””â”€â”€ æ€§èƒ½æµ‹è¯•
â””â”€â”€ æ‰‹åŠ¨æµ‹è¯•
    â”œâ”€â”€ å¯ç”¨æ€§æµ‹è¯•
    â”œâ”€â”€ å…¼å®¹æ€§æµ‹è¯•
    â””â”€â”€ å®‰å…¨æµ‹è¯•
```

### 15.2 å•å…ƒæµ‹è¯•
```typescript
// ç»„ä»¶æµ‹è¯•ç¤ºä¾‹
describe('Sidebar Component', () => {
  const mockProps = {
    collapsed: false,
    selectedTab: 'home',
    onTabChange: jest.fn(),
    onToggle: jest.fn()
  };

  beforeEach(() => {
    jest.clearAllMocks();
  });

  test('renders navigation items correctly', () => {
    render(<Sidebar {...mockProps} />);
    
    expect(screen.getByText('æˆ‘çš„é¦–é¡µ')).toBeInTheDocument();
    expect(screen.getByText('çŸ¥è¯†é—®ç­”')).toBeInTheDocument();
    expect(screen.getByText('çŸ¥è¯†å›¾è°±')).toBeInTheDocument();
  });

  test('handles tab selection', async () => {
    render(<Sidebar {...mockProps} />);
    
    const qnaButton = screen.getByText('çŸ¥è¯†é—®ç­”');
    await userEvent.click(qnaButton);
    
    expect(mockProps.onTabChange).toHaveBeenCalledWith('qna');
  });

  test('toggles collapse state', async () => {
    render(<Sidebar {...mockProps} />);
    
    const toggleButton = screen.getByRole('button', { name: /fold/i });
    await userEvent.click(toggleButton);
    
    expect(mockProps.onToggle).toHaveBeenCalled();
  });
});

// æœåŠ¡æµ‹è¯•ç¤ºä¾‹
describe('DocumentService', () => {
  let documentService: DocumentService;
  let mockDatabase: jest.Mocked<Database>;

  beforeEach(() => {
    mockDatabase = createMockDatabase();
    documentService = new DocumentService(mockDatabase);
  });

  test('creates document successfully', async () => {
    const documentData = {
      title: 'Test Document',
      content: 'Test content',
      filePath: '/path/to/test.md'
    };

    mockDatabase.run.mockResolvedValueOnce({ lastID: 1 });
    
    const result = await documentService.createDocument(documentData);
    
    expect(result).toEqual({
      id: 1,
      ...documentData,
      createdAt: expect.any(Date),
      updatedAt: expect.any(Date)
    });
  });

  test('handles database errors', async () => {
    mockDatabase.run.mockRejectedValueOnce(new Error('Database error'));
    
    await expect(documentService.createDocument({}))
      .rejects.toThrow('Database error');
  });
});
```

### 15.3 é›†æˆæµ‹è¯•
```typescript
// IPCé€šä¿¡é›†æˆæµ‹è¯•
describe('IPC Integration', () => {
  let app: Application;
  
  beforeAll(async () => {
    app = new Application({
      path: electronPath,
      args: [path.join(__dirname, '..', 'dist', 'main.js')],
      env: { NODE_ENV: 'test' }
    });
    
    await app.start();
  });
  
  afterAll(async () => {
    if (app && app.isRunning()) {
      await app.stop();
    }
  });

  test('document import via IPC', async () => {
    const testFilePath = path.join(__dirname, 'fixtures', 'test.md');
    
    const result = await app.electron.ipcRenderer.invoke(
      'document:import',
      { filePath: testFilePath }
    );
    
    expect(result).toMatchObject({
      id: expect.any(Number),
      title: 'Test Document',
      filePath: testFilePath
    });
  });

  test('search functionality', async () => {
    const searchQuery = 'test content';
    
    const results = await app.electron.ipcRenderer.invoke(
      'search:fulltext',
      { query: searchQuery }
    );
    
    expect(results).toBeInstanceOf(Array);
    expect(results.length).toBeGreaterThan(0);
  });
});
```

### 15.4 ç«¯åˆ°ç«¯æµ‹è¯•
```typescript
// Playwrightç«¯åˆ°ç«¯æµ‹è¯•
import { test, expect } from '@playwright/test';
import { ElectronApplication, _electron as electron } from 'playwright';

test.describe('Application E2E Tests', () => {
  let electronApp: ElectronApplication;

  test.beforeAll(async () => {
    electronApp = await electron.launch({
      args: ['dist/main.js']
    });
  });

  test.afterAll(async () => {
    await electronApp.close();
  });

  test('application starts successfully', async () => {
    const window = await electronApp.firstWindow();
    
    // æ£€æŸ¥çª—å£æ ‡é¢˜
    await expect(window).toHaveTitle('è¶£çŸ¥æ¡Œé¢ç‰ˆ');
    
    // æ£€æŸ¥ä¸»è¦UIå…ƒç´ 
    await expect(window.locator('.sidebar')).toBeVisible();
    await expect(window.locator('.main-content')).toBeVisible();
  });

  test('navigation between pages', async () => {
    const window = await electronApp.firstWindow();
    
    // ç‚¹å‡»çŸ¥è¯†é—®ç­”é¡µé¢
    await window.click('[data-testid="nav-qna"]');
    
    // éªŒè¯é¡µé¢å†…å®¹
    await expect(window.locator('.qna-page')).toBeVisible();
    await expect(window.locator('text=çŸ¥è¯†é—®ç­”')).toBeVisible();
  });

  test('document import workflow', async () => {
    const window = await electronApp.firstWindow();
    
    // æ‰“å¼€æ–‡æ¡£å¯¼å…¥
    await window.click('[data-testid="import-document"]');
    
    // æ¨¡æ‹Ÿæ–‡ä»¶é€‰æ‹©ï¼ˆéœ€è¦é¢„å…ˆå‡†å¤‡æµ‹è¯•æ–‡ä»¶ï¼‰
    const [fileChooser] = await Promise.all([
      window.waitForEvent('filechooser'),
      window.click('[data-testid="select-file"]')
    ]);
    
    await fileChooser.setFiles(['test-fixtures/sample.pdf']);
    
    // éªŒè¯å¯¼å…¥æˆåŠŸ
    await expect(window.locator('text=å¯¼å…¥æˆåŠŸ')).toBeVisible();
  });
});
```

### 15.5 æ€§èƒ½æµ‹è¯•
```typescript
// æ€§èƒ½åŸºå‡†æµ‹è¯•
describe('Performance Benchmarks', () => {
  test('application startup time', async () => {
    const startTime = Date.now();
    
    const app = new Application({
      path: electronPath,
      args: [path.join(__dirname, '..', 'dist', 'main.js')]
    });
    
    await app.start();
    await app.client.waitUntilWindowLoaded();
    
    const endTime = Date.now();
    const startupTime = endTime - startTime;
    
    // å¯åŠ¨æ—¶é—´åº”è¯¥åœ¨3ç§’å†…
    expect(startupTime).toBeLessThan(3000);
    
    await app.stop();
  });

  test('large dataset performance', async () => {
    // æµ‹è¯•å¤§é‡æ–‡æ¡£çš„å¤„ç†æ€§èƒ½
    const documents = generateTestDocuments(1000);
    
    const startTime = performance.now();
    
    for (const doc of documents) {
      await documentService.createDocument(doc);
    }
    
    const endTime = performance.now();
    const processingTime = endTime - startTime;
    
    // å¹³å‡æ¯ä¸ªæ–‡æ¡£å¤„ç†æ—¶é—´åº”è¯¥åœ¨10mså†…
    const avgTime = processingTime / documents.length;
    expect(avgTime).toBeLessThan(10);
  });
});
```

### 15.6 æµ‹è¯•é…ç½®
```json
{
  "jest": {
    "preset": "ts-jest",
    "testEnvironment": "jsdom",
    "setupFilesAfterEnv": ["<rootDir>/src/__tests__/setup.ts"],
    "moduleNameMapper": {
      "\\.(css|less|scss|sass)$": "identity-obj-proxy",
      "\\.(jpg|jpeg|png|gif|svg)$": "<rootDir>/src/__tests__/__mocks__/fileMock.js"
    },
    "collectCoverageFrom": [
      "src/**/*.{ts,tsx}",
      "!src/**/*.d.ts",
      "!src/__tests__/**",
      "!src/main/main.ts"
    ],
    "coverageThreshold": {
      "global": {
        "branches": 80,
        "functions": 80,
        "lines": 80,
        "statements": 80
      }
    }
  }
}
```

---

## ğŸ“ æ€»ç»“

### ğŸ¯ æ¶æ„è®¾è®¡ç‰¹è‰²

1. **ç°ä»£åŒ–æŠ€æœ¯æ ˆ**: é‡‡ç”¨ Electron + React + TypeScript æ„å»ºè·¨å¹³å°æ¡Œé¢åº”ç”¨
2. **æ¨¡å—åŒ–è®¾è®¡**: åŠŸèƒ½æ¨¡å—é«˜å†…èšä½è€¦åˆï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
3. **æ€§èƒ½ä¼˜å…ˆ**: å¤šå±‚æ¬¡æ€§èƒ½ä¼˜åŒ–ï¼Œç¡®ä¿æ¡Œé¢ç«¯åŸç”Ÿä½“éªŒ
4. **å®‰å…¨å¯é **: å…¨æ–¹ä½å®‰å…¨è®¾è®¡ï¼Œä¿æŠ¤ç”¨æˆ·æ•°æ®éšç§
5. **å¯æ‰©å±•æ€§**: æ’ä»¶ç³»ç»Ÿå’Œå¼€æ”¾APIæ”¯æŒåŠŸèƒ½æ‰©å±•

### ğŸ“ˆ å‘å±•è·¯å¾„

1. **v1.0**: å®ŒæˆåŸºç¡€æ¶æ„å’Œæ ¸å¿ƒåŠŸèƒ½
2. **v1.1**: é›†æˆAIæœåŠ¡å’Œè¯­ä¹‰æœç´¢
3. **v1.2**: å®ç°çŸ¥è¯†å›¾è°±å¯è§†åŒ–
4. **v1.3**: æ·»åŠ å­¦ä¹ æ•°æ®å’Œç»Ÿè®¡åŠŸèƒ½
5. **v2.0**: å»ºç«‹æ’ä»¶ç”Ÿæ€å’Œå¼€æ”¾API

### ğŸ–ï¸ æ¶æ„ä¼˜åŠ¿

- **è·¨å¹³å°ä¸€è‡´æ€§**: ä¸€å¥—ä»£ç æ”¯æŒä¸‰å¤§æ“ä½œç³»ç»Ÿ
- **ç¦»çº¿ä¼˜å…ˆ**: æœ¬åœ°æ•°æ®å¤„ç†ï¼Œäº‘ç«¯åŒæ­¥å¯é€‰
- **ç°ä»£åŒ–UI**: æ·±è‰²ä¸»é¢˜å’Œæ¯›ç»ç’ƒæ•ˆæœ
- **é«˜æ€§èƒ½**: å¤šé‡ä¼˜åŒ–ç¡®ä¿æµç•…ä½“éªŒ
- **å®‰å…¨å¯æ§**: ä¼ä¸šçº§å®‰å…¨è®¾è®¡
- **æ˜“äºæ‰©å±•**: å®Œå–„çš„æ’ä»¶ç³»ç»Ÿ

é€šè¿‡è¿™å¥—å®Œæ•´çš„æ¶æ„è®¾è®¡ï¼Œè¶£çŸ¥æ¡Œé¢ç‰ˆå°†æˆä¸ºä¸€æ¬¾æŠ€æœ¯é¢†å…ˆã€ç”¨æˆ·ä½“éªŒä¼˜ç§€çš„ç°ä»£åŒ–çŸ¥è¯†ç®¡ç†å·¥å…·ã€‚

---

*æœ¬æ–‡æ¡£å°†éšç€é¡¹ç›®å¼€å‘è¿›å±•æŒç»­æ›´æ–°å’Œå®Œå–„ã€‚*
